<!doctype html>
<html lang='en'>

<head>

	<meta charset='utf-8' />

	<script src='./js/react.development.js'></script>
	<script src='./js/react-dom.development.js'></script>
	<script src='./js/babel.min.js'></script>

	<script src='./js/three.min.js'></script>
	<script src='./js/OrbitControls.js'></script>
	<script src='./js/GLTFLoader.js'></script>
	<script src='./js/DRACOLoader.js'></script>

	<script src='./js/TweenMax.min.js'></script>

	<title>
		nomDAO
	</title>

	<style>

		body {
			margin      : 0;
			font-family : Arial ;
			font-size   : 17px;
			color       : white ;
			overflow    : hidden ;
		}

		/* card css by BD start */
		.card_flag_img {
			margin-bottom: 5px;
			height: 20px;
		}

		.card_flag_img img {
			margin-bottom: 0px;
		}

		/* .main-container {
			display: flex;
			flex-direction: row;
			position: relative;
		} */

		/* .globe-main {
			position: absolute;
			left: 20%;
		} */

		.card_info_main h3 {
			font-family: 'Poppins', sans-serif;
			font-size: 17px;
			font-style: normal;
			font-weight: 600;
			line-height: 28px;
			letter-spacing: 0em;
			text-align: left;
			padding-bottom: 4px;
			margin: 0;
			color : black ;
			z-index : 10 ;
		}

		.card_info_main p {
			font-family: 'Work Sans', sans-serif;
			font-size: 14px;
			font-style: normal;
			font-weight: 400;
			line-height: 16px;
			letter-spacing: 0em;
			text-align: left;
			margin: 0;
		}

		/* card css by BD end */

		.w100h100 {
			width: 100%;
			height: 100%;
		}

		.Card_div {
			position: absolute;
			color: black;
			padding-top    : 20px ;
			padding-bottom : 10px ;
			padding-left   : 30px ;
			padding-right  : 30px ;
			opacity: .8;
			border-radius: 25px;
		}

		.canvas_div {
			position: absolute;
			background: rgba(39, 39, 53, 0.9);
		}

		.animate {
			-webkit-animation: animatezoom 0.6s;
			animation: animatezoom 0.6s;
		}

		@-webkit-keyframes animatezoom {
			from {
				-webkit-transform: scale(0)
			}

			to {
				-webkit-transform: scale(1)
			}
		}

		@keyframes animatezoom {
			from {
				transform: scale(0)
			}

			to {
				transform: scale(1)
			}
		}

		.fade-in-image {
			animation: fadeIn 1s;
			-webkit-animation: fadeIn 1s;
			-moz-animation: fadeIn 1s;
			-o-animation: fadeIn 1s;
			-ms-animation: fadeIn 1s;
		}

		@keyframes fadeIn {
			0% {
				opacity: 0;
			}

			100% {
				opacity: 0.8;
			}
		}

		@-moz-keyframes fadeIn {
			0% {
				opacity: 0;
			}

			100% {
				opacity: 0.8;
			}
		}

		@-webkit-keyframes fadeIn {
			0% {
				opacity: 0;
			}

			100% {
				opacity: 0.8;
			}
		}

		@-o-keyframes fadeIn {
			0% {
				opacity: 0;
			}

			100% {
				opacity: 0.8;
			}
		}

		@-ms-keyframes fadeIn {
			0% {
				opacity: 0;
			}

			100% {
				opacity: 0.8;
			}
		}

		.globe-main {
			position: absolute;
		}

		.main-container {
			display: flex;
			flex-direction: row;
			position: relative;
		}

		.globe-inner {
			height: 100%;
		}

		.full-container {
			/* height: 100vh; */
			/*overflow: hidden;*/
		}

		.cnt-sec {
			position: absolute;
			width: 42%;
			/* height: 100%; */
			top: 50%;
			transform: translate(0, -50%);
			/* font-size: 25px; */
			/* left: 0; */
		}

		.cnt-sec h1,
		.text-sec h1 {
			font-size: 55px;
		}

		.cnt-sec p {
			font-size: 20px;
			padding-right: 146px;
		}

		.text-sec p {
			font-size: 20px;
		}

		.cnt-main {
			display: flex;
			max-width: 1366px;
			height: 100vh;
			margin: auto;
		}

		.container-sec {
			max-width: 1366px;
			margin: auto;
			margin-top: 150px;
		}

		.text-sec {
			width: 66%;
			margin: auto;
			text-align: center;
		}

	</style>

</head>

<body>

	<div id = 'Ap' /></div >
	
	<script type='text/babel'>
			
		const Globe = props => {
			const [ states, set_states ]    = React . useState ( [  ] )
			const container_ref             = React . useRef   ( null )	
			
			let   canvas
			let   context
			
			const width                        = props . width
			const height                       = props . height
			
			const globe_radius                 = 5
			const Deg2Rad                      = Math.PI / 180
			const Rad2Deg                      = 180 / Math.PI
			let   scene                        = null
			let   camera                       = null
			let   gl_canvas			
			let   renderer                     = null
			let   scene2                       = null
			let   camera2                      = null
			let   gl_canvas2			
			let   renderer2                    = null			
			let   render_target			
			let   raycaster                    = null
			const data_point_threshold         = .75 
			let   spinner_mesh
			let   spinner_mesh_frame_index     = 0
			let   spinner_mesh_tts             = 2
			let   spinner_mesh_current_tts     = 0
			let   beacon_texture_frames
			let   beacon_image
			let   leash_strength               = 3			
			let   sphere
			
			let   marker_modes                 = {
				hidden: 0,
				raining: 1,
				normal: 2,
				mode: 0,
			}
			let   rain                         = {
				start: 0,
				origin: null,
				delay: 1 * 1000,
				duration: 3 * 1000,
				curvature: 2,
				direction: { x: 0, y: 1, z: 1 },
				distance: globe_radius * 3,
				control_point: new THREE.Vector3(0, 0, 0)
			}
			const Pointers                     = {
				position      : new THREE . Vector2 () ,
				down_position : new THREE . Vector2 () ,
				old_position  : new THREE . Vector2 () ,
				delta         : new THREE . Vector2 () ,
				wil_delta     : 0                      ,
				button        : - 1                    ,
				left_button   : 0                      ,
				middle_button : 1                      ,
				right_button  : 2                      ,
				target        : null                   ,
			}
			
			let   mouse = new THREE . Vector2 ()
			let   maximum_selection_distance   = 300
			
			let   tunnel                       = null
			
			let   planet_clouds_stars_and_portal_group
			
			class Post                                   {
				constructor ( args ) {
					this . scene  = new THREE.Scene()
					this . camera = new THREE.
					  PerspectiveCamera(
					  75, 
					  width / height , //canvasContainer.offsetWidth / canvasContainer.offsetHeight,
					  0.1,
					  1000
					)

					//new renderer
					this . gl_canvas           = document . createElement ( 'canvas' )
					this . gl_canvas . width   = width
					this . gl_canvas . height  = height

					this . renderer            = new THREE.WebGLRenderer  ( { canvas : this . gl_canvas , alpha : true , antialias : false } )
					this . renderer  . setSize                            ( width , height )
					
					this . mesh                = new THREE . Mesh (
						new THREE . PlaneGeometry ( 2 , 2 ) ,
						new THREE . ShaderMaterial ( {
							vertexShader: `
								varying vec2 UV ;
								void main () {
									UV          = uv ;
									gl_Position = vec4 ( position , 1. ) ;
								}` ,
							fragmentShader: `
								uniform float u_date ;
								uniform vec2  u_resolution ;
								varying vec2 UV ;
								
								void main () {
								/*
									//vec2  uv      = ( gl_FragCoord . xy - .5 * u_resolution . xy ) / u_resolution . y ;
									vec2  uv      = UV * 2. - 1. ;
									uv           *= 3. ;
									vec3  col     = vec3 ( 0 ) ;
									float d       = length ( uv ) ;
									float m       = .02 / d ;
									col          += m ;
									
									//float rays    = max ( 0. , 1. - abs ( uv . x * uv . y * 10. ) ) ;
									float rays    = 1. - abs ( uv . x * 10000. )  ;
									col          += rays ;
									
									gl_FragColor  = vec4 ( col , 1. ) ;
								*/
									vec2 R = u_resolution . xy ;
									vec2 U = abs ( u + u - R ) ;
									gl_FragColor = vec4 ( U . x < min ( .5 * R , R - U * 1.7 ) . y ) ;								
								}
							`, 
						})
					)
					this . scene . add ( this . mesh )
				}
				render      ( args ) {
					if ( ! args ) return
					if ( ! 'texture_map' in args ) return
					
					//this . mesh     . material . uniforms . texture_map . value = args . texture_map
					//this . mesh     . material . uniforms . texture_map . value = render_target . texture
					//this . mesh     . material . uniforms [ 'texture_map' ] = { value : args . texture_map }
					this . mesh     . material . uniforms [ 'u_date'       ] = { value : performance . now () }
					this . mesh     . material . uniforms [ 'u_resolution' ] = { value : new THREE . Vector2 ( this . gl_canvas . width , this . gl_canvas . height ) }
					console . log ( this . gl_canvas . width , this . gl_canvas . height )
					//this . mesh     . material . needsUpdate = true
					this . renderer . render                                  ( this . scene , this . camera )
				}
			}
			class Tunnel                                 {
				constructor          ( texture )    {
				  this.init();
				  this.createMesh(texture);

				  this.handleEvents();

				  //this.initAnimation();

				  //window.requestAnimationFrame(this.render.bind(this));
				}
				init                 ( args    )    {
					const ww = window.innerWidth;
					const wh = window.innerHeight;

					this.speed = 8;

					this . mouse = {
						position : new THREE . Vector2 ( ww * 0.5 , wh * 0.5 ) ,
						ratio    : new THREE . Vector2 ( 0        , 0        ) ,
						target   : new THREE . Vector2 ( ww * 0.5 , wh * 0.5 )
					}

					this.textureParams = {
						offsetX: 0,
						offsetY: 0,
						repeatX: 10,
						repeatY: 4
					}
					this.cameraShake = {
						x: 0,
						y: 0
					}
					
					this . canvas          = document . createElement ( 'canvas' )
					this . canvas . width  = canvas . width
					this . canvas . height = canvas . height

					this.renderer = new THREE.WebGLRenderer({
						antialias: true,
						canvas: this . canvas //document.querySelector("#scene")
					});
					this.renderer.setSize(ww, wh);

					this.camera = new THREE.PerspectiveCamera(15, ww / wh, 0.01, 1000);
					this.camera.rotation.y = Math.PI;
					this.camera.position.z = 0.35; // 2

					this.scene = new THREE.Scene();
				};
				createMesh           ( texture )    {
				  var points = [];
				  var i = 0;
				  var geometry = new THREE.Geometry();
				  
				  this.scene.remove(this.tubeMesh);

				  for (i = 0; i < 5; i += 1) {
					points.push(new THREE.Vector3(0, 0, 3 * (i / 4)));
				  }
				  points[4].y = -0.06;

				  this.curve = new THREE.CatmullRomCurve3(points);
				  this.curve.type = "catmullrom";

				  geometry = new THREE.Geometry();
				  geometry.vertices = this.curve.getPoints(70);
				  this.splineMesh = new THREE.Line(geometry, new THREE.LineBasicMaterial());
				  //this . scene . add ( this . splineMesh )

				  this.tubeMaterial = new THREE.MeshBasicMaterial({
					wireframe : false ,
					side: THREE.BackSide,
					map: texture
				  });
				  this.tubeMaterial.map.wrapS = THREE.MirroredRepeatWrapping;
				  this.tubeMaterial.map.wrapT = THREE.MirroredRepeatWrapping;
				  this.tubeMaterial.map.repeat.set(
					this.tubeMaterial.repx,
					this.tubeMaterial.repy
				  );

				  this.tubeGeometry = new THREE.TubeGeometry(this.curve, 70, 0.02, 30, false);
				  this.tubeGeometry_o = this.tubeGeometry.clone();
				  this.tubeMesh = new THREE.Mesh(this.tubeGeometry, this.tubeMaterial);

				  this.scene.add(this.tubeMesh);
				};
				handleEvents         ( args    )    {
				  window.addEventListener("resize", this.onResize.bind(this), false);
				  document.body.addEventListener(
					"mousemove",
					this.onMouseMove.bind(this),
					false
				  );
				};
				onResize             ( args    )    {
				  const ww = window.innerWidth;
				  const wh = window.innerHeight;

				  this.camera.aspect = ww / wh;
				  this.camera.updateProjectionMatrix();
				  this.renderer.setSize(ww, wh);
				};
				onMouseMove          ( e       )    {
					this.mouse.target.x = e.clientX
					this.mouse.target.y = e.clientY

					//this.mouse.position.x = e.clientX
					//this.mouse.position.y = e.clientY
				};
				update               ( args    )    {
				  this.createMesh();
				};
				initAnimation        ( args    )    {
					
				  // Timeline animation
				  var hyperSpace = new TimelineMax ( { repeat : -1 } )
				  /*
				  // backwards
				  hyperSpace . to ( this . textureParams , 4 , {
					repeatX : 0.3 ,
					ease    : Power1 . easeInOut
				  } )
				  */
				  
				  // forward & ease
				  //hyperSpace . to ( this . textureParams , 12 , {
					  //offsetX: .5 ,
					  //ease : Power2 . easeInOut
				  //} )
					
				  /*
				  // ?
				  hyperSpace.to( this.textureParams, 6, {
					  repeatX: 10,
					  ease: Power2.easeInOut
					},
					"-=5"
				  )
				  */
				  
				  var shake = new TimelineMax({ repeat: -1, repeatDelay: 5 });
				  
				  /*
				  shake.to(
					this.cameraShake,
					2,
					{
					  x: -0.01,
					  ease: RoughEase.ease.config({
						template: Power0.easeNone,
						strength: 0.5,
						points: 100,
						taper: "none",
						randomize: true,
						clamp: false
					  })
					},
					4
				  );
				  

					// ?
				  shake.to(this.cameraShake, 2, {
					x: 0,
					ease: RoughEase.ease.config({
					  template: Power0.easeNone,
					  strength: 0.5,
					  points: 100,
					  taper: "none",
					  randomize: true,
					  clamp: false
					})
				  });
				  
				  */
				};
				updateMaterialOffset ( args    )    {
				  this.tubeMaterial.map.offset.x = this.textureParams.offsetX;
				  this.tubeMaterial.map.offset.y += 0.001;
				  this.tubeMaterial.map.repeat.set(
					this.textureParams.repeatX,
					this.textureParams.repeatY
				  );
				};
				updateCameraPosition ( args    )    { 
					const ww = window.innerWidth  ;
					const wh = window.innerHeight ;

					this.mouse.position.x += (this.mouse.target.x - this.mouse.position.x) / 50;
					this.mouse.position.y += (this.mouse.target.y - this.mouse.position.y) / 50;

					this.mouse.ratio.x = this.mouse.position.x / ww;
					this.mouse.ratio.y = this.mouse.position.y / wh;

					this.camera.position.x = this.mouse.ratio.x * 0.044 - 0.025 + this.cameraShake.x;
					this.camera.position.y = this.mouse.ratio.y * 0.044 - 0.025;
				  
				};
				updateCurve          ( args    )    {
  var i = 0;
  var index = 0;
  var vertice_o = null;
  var vertice = null;
  for (i = 0; i < this.tubeGeometry.vertices.length; i += 1) {
    vertice_o  = this.tubeGeometry_o.vertices[i];
    vertice    = this.tubeGeometry.vertices[i];
	
    index      = Math.floor(i / 30);
	
    vertice.x += (vertice_o.x + this.splineMesh.geometry.vertices[index].x - vertice.x) / 15;
    vertice.y += (vertice_o.y + this.splineMesh.geometry.vertices[index].y - vertice.y) / 15;
  }
  this.tubeGeometry.verticesNeedUpdate = true;

  this.curve.points[2].x = 0.6 * (1 - this.mouse.ratio.x) - 0.3;
  this.curve.points[3].x = 0;
  this.curve.points[4].x = 0.6 * (1 - this.mouse.ratio.x) - 0.3;

  this.curve.points[2].y = 0.6 * (1 - this.mouse.ratio.y) - 0.3;
  this.curve.points[3].y = 0;
  this.curve.points[4].y = 0.6 * (1 - this.mouse.ratio.y) - 0.3;

  this.splineMesh.geometry.verticesNeedUpdate = true;
  this.splineMesh.geometry.vertices = this.curve.getPoints(70);				};
				render               ( args    )    {
				  this . textureParams . offsetX += 0.001
				  
				  this.updateMaterialOffset();

				  this.updateCameraPosition();

				  this.updateCurve();

				  this.renderer.render(this.scene, this.camera);

				  //window.requestAnimationFrame(this.render.bind(this));
				};
			}			
			const Quadratic_bezier_at          = args => {
				let t = args.t
				let one_minus_t = 1 - t
				let one_minus_t_2 = one_minus_t * one_minus_t

				return new THREE.Vector3(
					one_minus_t_2 * args.p0.x + 2 * one_minus_t * t * args.c.x + t * t * args.p1.x,
					one_minus_t_2 * args.p0.y + 2 * one_minus_t * t * args.c.y + t * t * args.p1.y,
					one_minus_t_2 * args.p0.z + 2 * one_minus_t * t * args.c.z + t * t * args.p1.z)
			}			
			const Lat_lon_to_cartesian         = args => {
			/*
				const phi   = ( 90 - args . lat ) * Deg2Rad
				const theta = (    - args . lon ) * Deg2Rad
				return {
					x : globe_radius * Math . sin ( phi ) * Math . cos ( theta ) ,
					y : globe_radius * Math . cos ( phi ) ,
					z : globe_radius * Math . sin ( phi ) * Math . sin ( theta )
				}
					function Lat_lon_to_cartesian(args){
					  const phi = (90 - args.lat ) * Math.PI / 180
					  const theta = (90 - args.lon ) * Math.PI / 180
					  return {
						x: globe_radius * Math.sin(phi) * Math.cos(theta),
						y: globe_radius * Math.cos(phi),
						z: globe_radius * Math.sin(phi) * Math.sin(theta)
					  }
					  */
					  const latitude = (args . lat / 180) * Math.PI
					  const longitude = (args . lon / 180) * Math.PI
					  return {
						x: globe_radius * Math.cos(latitude) * Math.sin(longitude) ,
						y: globe_radius * Math.sin(latitude) ,
						z: globe_radius * Math.cos(latitude) * Math.cos(longitude)
					  }
			}
			const Ddd2dd                       = args => {
				const vector = new THREE.Vector3()
				const widthHalf = 0.5 * renderer.getContext().canvas.width
				const heightHalf = 0.5 * renderer.getContext().canvas.height

				args.object3D.updateMatrixWorld()
				vector.setFromMatrixPosition(args.object3D.matrixWorld)
				vector.project(camera)

				vector.x = (vector.x * widthHalf) + widthHalf
				vector.y = - (vector.y * heightHalf) + heightHalf

				return new THREE.Vector2(vector.x, vector.y)
			}
			const Mouse_over_globe             = args => {
				let de = renderer.domElement
				let ol = renderer.domElement.offsetLeft
				let ot = renderer.domElement.offsetTop
				while (de.parentElement != null) {
					de = de.parentElement
					ol += de.offsetLeft
					ot += de.offsetTop
				}

				mouse.x = ((Pointers.position.x - ol) / renderer.domElement.clientWidth) * 2 - 1;
				mouse.y = - ((Pointers.position.y - ot) / renderer.domElement.clientHeight) * 2 + 1;
				raycaster.setFromCamera(mouse, camera)
				let intersection_objects = raycaster.intersectObject( sphere , true)
				return intersection_objects.length > 0
			}
			const Evento_at                    = args => {
				let result = null
				let de = renderer.domElement
				let ol = renderer.domElement.offsetLeft
				let ot = renderer.domElement.offsetTop
				while (de.parentElement != null) {
					de = de.parentElement
					ol += de.offsetLeft
					ot += de.offsetTop
				}

				mouse.x = ((Pointers.position.x - ol) / renderer.domElement.clientWidth) * 2 - 1;
				mouse.y = - ((Pointers.position.y - ot) / renderer.domElement.clientHeight) * 2 + 1;
				// mouse.x = (Pointers.position.x / width) * 2 - 1
				// mouse.y = (- Pointers.position.y / height) * 2 + 1
				raycaster.setFromCamera(mouse, camera)
				let intersection_objects = raycaster.intersectObject(sphere, true)
				if (intersection_objects.length > 0) {
					let intersection = intersection_objects[0]

					let min_distance_squared = 1000 * 1000
					let min_evento = null
					for ( const evento of Evento . Eventos ) {
						let distance_squared = intersection.point.distanceToSquared(evento.mesh.position)
						if (distance_squared < min_distance_squared) {
							min_distance_squared = distance_squared
							min_evento = evento
						}
					}
					if (min_evento != null && min_distance_squared < (maximum_selection_distance * maximum_selection_distance))
						result = min_evento
				}
				return result
			}

			class Lat_lon                                {
				constructor ( args ) {
					this . lat = 0
					this . lon = 0
					
					if ( args ) {
						if ( 'lat' in args ) this . lat = args . lat
						if ( 'lon' in args ) this . lon = args . lon
					}
				}
			}
			class Marker extends Lat_lon                 {
				static Instances   = []
				static Marker_size = .25
				static Mesh_group  = new THREE . Group ()
				
				static Animate_markers              = args => {
					let tile_vector        = new THREE . Vector3  ()
					let nt                 = 0
					let rain_time_elapsed  = new Date() . getTime () - rain . start
					
					for ( let [ index , marker ] of Marker . Instances . entries () ) { 
						marker . intensity += marker . intensity_step
						if ( marker . intensity > 1 ) {
							marker . intensity = 1
							marker . intensity_step = - marker . intensity_step
						}
						if ( marker . intensity < .5 ) {
							marker . intensity = .5
							marker . intensity_step = - marker . intensity_step
						}
						marker . mesh . rotation . z += .005
						marker . mesh . scale . x = 2 * marker . intensity
						marker . mesh . scale . y = 2 * marker . intensity
						
						marker . mesh . material . uniforms [ 'u_intensity'  ] = { value : marker . intensity }
						marker . mesh . material . uniforms [ 'u_time'       ] = { value : performance . now () / 10000 }
						marker . mesh . material . uniforms [ 'u_resolution' ] = { value : new THREE . Vector2 ( Marker . Marker_size , Marker . Marker_size ) }
						
						const cartesian = Lat_lon_to_cartesian ( { lat : marker . lat , lon : marker . lon } )
						tile_vector . set ( cartesian . x , cartesian . y , cartesian . z )
					
						if ( marker_modes . raining == marker_modes . mode ) {
							let t = rain_time_elapsed / marker . t
							if ( t > 1  ) t = 1
							if ( t != 1 ) nt++
							rain . control_point . copy           ( tile_vector )
							rain . control_point . multiplyScalar ( rain . curvature )
							let position = Quadratic_bezier_at    ( { t : t , c : rain . control_point , p0 : rain . origin , p1 : tile_vector } )
							marker . mesh . position . copy ( position )
						}
					}
					if ( marker_modes . raining == marker_modes . mode )
						if ( nt == 0 ) 
							marker_modes . mode = marker_modes . normal
				}
				
				constructor ( args ) {
					super ( args )
					
					const p = performance . now ()
					this . intensity      = Math . random () //p - Math . floor ( p )
					this . intensity_step = 0.005
					
					this . t = Math . random () * ( rain . duration - 1000 ) + 1000
					
					this . mesh = new THREE . Mesh ( 
						new THREE . PlaneGeometry ( Marker . Marker_size , Marker . Marker_size ) , 
						new THREE . ShaderMaterial ( { 
							depthTest    : false ,
							transparent  : true ,
							vertexShader : `
								varying vec2 UV ;
								void main() {
									UV = uv ;
									gl_Position = projectionMatrix * modelViewMatrix * vec4 ( position , 1.0 ) ;
								}` ,
							fragmentShader : `
								uniform float u_intensity ;
								uniform float u_time ;
								uniform vec2  u_resolution ;
								
								varying vec2  UV ;
									
								#define r(x)     fract(1e4*sin((x)*541.17))      // rand, signed rand   in 1, 2, 3D.
								#define sr2(x)   ( r(vec2(x,x+.1)) *2.-1. )
								#define sr3(x)   ( r(vec4(x,x+.1,x+.2,0)) *2.-1. )
								float flare( vec2 U ) {	
									vec2 A = sin(vec2(0, 1.57) + u_time);
									U = abs( U * mat2(A, -A.y, A.x) ) * mat2(2,0,1,1.7); 
									return .2/max(U.x,U.y);                      // glowing-spiky approx of step(max,.2)
									//return .2*pow(max(U.x,U.y), -2.);
								}
								void main() {
								
								/*
									vec2  uv     = UV / 4. ; //- 1. ;
									vec2  xy     = u_resolution . xy ;
									vec2  U      = abs ( uv + uv - xy ) ;
									float i      = 0. ;
									float min_y  = min ( .5 * xy , xy - U * 1.7 ) . y ;
									if ( U . x < min_y  ) i = .5 / max ( U . x , U . y ) ;
									i *= fract ( u_time ) ;
									gl_FragColor = vec4 ( i , i , 0 , i ) ;
								*/
								/*
									vec2  uv     = UV / 4. ;
									vec2  xy     = u_resolution . xy ;
									vec2  U      = abs ( uv + uv - xy ) ;
									float i      = 0. ;
									float min_y  = min ( .5 * xy , xy - U * 2. ) . y ;
									if ( U . x < min_y  ) i = 1. ; //.5 / max ( U . x , U . y ) ;
									i *= u_intensity ;
									gl_FragColor = vec4 ( i , i , 0 , i ) ;
								*/
								
								float f = 1./2.; //  NB: 1./2. crash WebGL driver on Linux/chrome ! 
								vec2  U = UV / 4. ;
								U = abs(U+U - (gl_FragColor.xy=u_resolution.xy)) / gl_FragColor.y;
								gl_FragColor += flare ( U ) + 1. - 2.*pow((  pow(2.*U.x, f) + pow(U.x + U.y*1.7, f) + pow(abs(U.x - U.y*1.7), f) )/3., 1./f) -gl_FragColor;
								float i = ( gl_FragColor . r + gl_FragColor . g + gl_FragColor . b ) / 3. ;
								i *= u_intensity ;
								gl_FragColor = vec4 ( i , i , 0 , i ) ;
								
								/*
								vec2 R = u_resolution.xy;
								vec2 U = UV / 4. ;
								U =  (U+U - R) / R.y;
								gl_FragColor -= gl_FragColor+.3;
								float i = 0. ;
								//for (float i=0.; i<99.; i++)
									gl_FragColor += flare (U - sr2(i)*R/R.y )           // rotating flare at random location
									                * r(i+.2)                          // random scale
									                * (1.+sin(u_time+r(i+.3)*6.))*.1  // time pulse
									                //* (1.+.1*sr3(i+.4));               // random color - uncorrelated
									                * (1.+.1*sr3(i));                  // random color - correlated
								*/
								}								
							` ,
						} )
					)
					const cartesian = Lat_lon_to_cartesian ( { lat : this . lat , lon : this .lon } )
					this . mesh . lookAt         ( cartesian . x        , cartesian . y      , cartesian . z ) 
					this . mesh . position . set ( cartesian . x        , cartesian . y      , cartesian . z )
					this . mesh . rotation . z   = Math . random () * Math . PI * 2
					
					Marker . Instances  . push ( this )
					Marker . Mesh_group . add  ( this . mesh )
				}
			}
			class Evento                                 {
				static Eventos = []
				static Showed  = null
				static Showed_last  = 0
				
				constructor ( args ) {
					this . creation       = Date . now ()
					this . lat            = 0
					this . lon            = 0
					this . mesh           = null
					this . div            = null
					this . html           = ''
					this . image          = null
					this . texture_frames = []
					this . old_dot
					this . curve_start
					this . curve_factor

					let found = false
					let i = 0
					while ( ! found && i < Evento . Eventos . length)
						found = Evento . Eventos [ i ++ ] . creation == args . creation
					if (!found) {
						if (args) {
							if ( 'creation' in args ) this . creation = args . creation
							if ( 'lat'      in args ) this . lat      = args . lat
							if ( 'lon'      in args ) this . lon      = args . lon
							if ( 'width'    in args ) this . width    = args . width
							if ( 'height'   in args ) this . height   = args . height
							if ( 'image'    in args ) this . image    = args . image
							//if ( 'html'     in args ) if ( args . html != '' ) this . html = args . html
						}

						if (this.html == '') {
							this.html += '<div>'
							//if ('card_flag' in args) this.html += '<div class="card_flag_img"><img src = "' + args.card_flag + '"/></div>'
							//if ('card_flag' in args) this.html += '<img src = "' + args.card_flag + '"/>'
							//this.html += '<div class="card_info_main">'
							if ('card_title' in args) this.html += '<label>' + args.card_title + '</label>'
							//if ('card_title' in args) this.html += '<h3>' + args.card_title + '</h3>'
							if ('card_subtitle' in args) this.html += '<p>' + args.card_subtitle + '</p>'
							//this.html += '</div>'
							this.html += '</div>'
						}

						let meshBasicMaterial
						if (this.texture_frames.length > 0) meshBasicMaterial = new THREE.MeshBasicMaterial({ map: this.texture_frames[0], transparent: true, side: THREE.DoubleSide })
						else meshBasicMaterial = new THREE.MeshBasicMaterial({ side: THREE.DoubleSide, transparent: true })

						this.mesh = new THREE.Mesh(new THREE.PlaneGeometry(states.point_side, states.point_side), meshBasicMaterial)
						let cartesian = Lat_lon_to_cartesian({ lat: this.lat, lon: this.lon })
						this.mesh.position.set(cartesian.x, cartesian.y, cartesian.z)
						this.mesh.rotation.set(- this.lat * Deg2Rad, this.lon * Deg2Rad, 0, 'YXZ')
						this.frame_index = Math.floor(Math.random() * this.texture_frames.length)
						this.tts = 3
						this.current_tts = 0

						this.div = document.createElement('div')
						this.div.style.position = 'absolute'
						this.div.style.background = 'white'
						this.div.style.display = 'none'
						//this.div.style.padding = '1vmax'
						this.div.className = 'Card_div fade-in-image'
						this.div.innerHTML = this.html
						container_ref.current.appendChild(this.div)
						//canvas.appendChild(this.div)
						//renderer.domElement.appendChild(this.div)

						let v_camera = new THREE.Vector3()
						v_camera.subVectors(camera, this.mesh.position)
						this.old_dot = v_camera.dot(v_camera)

						if ( Evento . Showed != null )
							Evento . Showed . hide ()

						Evento . Eventos . push(this)
					}
				}
				hide() {
					this.div.style.display = 'none'

					Evento . Showed = null
					Evento . Showed_last = new Date().getTime()
				}
				show() {
					Evento . Showed = this

					this.curve_start = new Date().getTime()
					this.curve_factor = 0
					this.div.style.display = 'block'

					let cartesian = Lat_lon_to_cartesian({ lat: this.lat, lon: this.lon })
					//spinner_mesh.position.set(cartesian.x, cartesian.y, cartesian.z)
					//spinner_mesh.rotation.set(- this.lat * Deg2Rad, this.lon * Deg2Rad, 0, 'YXZ')
				}
			}
			const Rain                         = args => {
				rain . origin                   = new THREE . Vector3 ( rain . direction . x, rain . direction . y , rain . direction . z )
				rain . origin . applyQuaternion                       ( camera . quaternion ) . normalize ()
				rain . origin . multiplyScalar                        ( rain . distance )

				marker_modes  . mode            = marker_modes . raining
				rain          . start           = new Date() . getTime ()
			}
			const Animate_eventos              = args => {
				//context . clearRect ( 0 , 0 , canvas . width , canvas . height )
				
				const cw = container_ref.current.clientWidth
				const ch = container_ref.current.clientHeight
/*
				if (--spinner_mesh_current_tts < 0) {
					spinner_mesh_current_tts = spinner_mesh_tts
					if (++spinner_mesh_frame_index >= beacon_texture_frames.length)
						spinner_mesh_frame_index = 0
					spinner_mesh.material.map = beacon_texture_frames[spinner_mesh_frame_index]
					spinner_mesh.material.needsUpdate = true
				}
*/
				let v_camera = new THREE.Vector3()
				if (Evento . Showed != null) {
					v_camera.subVectors(camera.position, Evento . Showed.mesh.position)
					let dot = Evento . Showed.mesh.position.dot(v_camera)
					if (dot < 0)
						Evento . Showed.hide()
				}

				for (let evento of Evento . Eventos) {
					v_camera.subVectors(camera.position, evento.mesh.position)
					let dot = evento.mesh.position.dot(v_camera)
					evento.mesh.visible = dot >= 0

					if (--evento.current_tts < 0) {
						evento.current_tts = evento.tts
/*
						if (++evento.frame_index >= data_texture_frames.length)
							evento.frame_index = 0
						evento.mesh.material.map = data_texture_frames[evento.frame_index]
						evento.mesh.material.needsUpdate = true
*/
					}
				}

				let q = new THREE.Vector2()
				if ( Evento . Showed != null) {
					//Evento . Showed.mesh.visible = false

					const ew = Evento . Showed.div.clientWidth
					const eh = Evento . Showed.div.clientHeight

					v_camera.subVectors(camera.position, Evento . Showed.mesh.position)
					let dot = Evento . Showed.mesh.position.dot(v_camera)

					const p = Ddd2dd({ object3D: Evento . Showed.mesh })

					const r = Ddd2dd({ object3D: sphere })

					q.set(p.x + ew / 4, 0)
					let dir = new THREE.Vector2()
					//let r   = new THREE.Vector2 ( q . x + ew / 2 , q . x + ew / 2 )
					dir.subVectors(q, p)
					let len = dir.length()
					if (len > ch / leash_strength) len = ch / leash_strength
					q.lerp(p, 1 - len / dir.length())

					if (q.x > r . x ) q.x = r . x

					let q2x = q.x + ew / 2

					Evento . Showed.div.style.left = q.x + 'px'
					Evento . Showed.div.style.top = q.y + 'px'

					const to_vector2      = new THREE . Vector2 ()
					const control_vector2 = new THREE . Vector2 ()
					if ( p . x <= q . x ) {
						let y_t = 1 - ( q . x - p . x ) / ( ew / 4 )
						if ( y_t > 1 ) y_t = 1
						let y = q . y + eh / 2 + y_t * ( eh / 2 ) + 4
						to_vector2 . set ( q . x - 6 , y )
						control_vector2 . set ( q . x - ew / 4 * ( 1 - y_t ) , y )
					} else {
						let x = p . x
						if ( x > q . x + ew / 2 ) x = q . x + ew / 2
						to_vector2 . set ( x , q . y + eh + 6 )
						control_vector2 . set ( p . x , q . y + eh + 6 )
					}

					let curve_time_elapsed = new Date().getTime() - Evento . Showed.curve_start
					let curve_t = curve_time_elapsed / 250
					if (curve_t > 1) curve_t = 1
					let x = p.x + (to_vector2 . x - p.x) * curve_t
					let y = p.y + (to_vector2 . y - p.y) * curve_t

					context . strokeStyle = 'white'
					context . lineWidth = 2
					context . beginPath ()
					context . moveTo ( p . x , p . y - 3)
					context . quadraticCurveTo ( control_vector2 . x , control_vector2 . y , x , y )
					context . stroke ()

					context . fillStyle = 'white'
					context.beginPath()
					context.arc(x, y, 3, 0, 2 * Math.PI)
					context.fill()

					context . fillStyle = 'white'
					context.beginPath()
					context.arc(p.x, p.y, 3, 0, 2 * Math.PI)
					context.fill()
				}
			}			
			const Image_to_texture_frames      = args => {
				let result = []
				let n = args.image.width / args.image.height
				for (let i = 0; i < n; i++) {
					let canvas = document.createElement('canvas')
					canvas.width = args.image.height
					canvas.height = args.image.height
					let context = canvas.getContext('2d')
					context.drawImage(
						args.image,
						- i * args.image.height,
						0)
					let texture = new THREE.CanvasTexture(canvas)
					texture.magFilter = THREE.NearestFilter
					texture.minFilter = THREE.NearestFilter
					texture.needsUpdate = true
					result.push(texture)
				}
				return result
			}
			const Load_image                   = args => {
				return new Promise((resolve, reject) => {
					let img = document.createElement('img')
					img.addEventListener('load', function (event) {
						resolve({ image: img })
					})
					img.src = args.image_source
				})
			}

			const create_scene                 = async args => {
				const Init_ThreeJS   = args => {
					canvas                                = document . createElement ( 'canvas' )
					canvas        . width                 = width
					canvas        . height                = height
					canvas        . style . position      = 'absolute'			
					context                               = canvas . getContext ( '2d' )
					context       . clearRect             ( 0 , 0 , canvas . width , canvas . height )
					container_ref . current . appendChild ( canvas )

					let portal
					let post

					const canvasContainer = container_ref . current // document . querySelector('#canvasContainer')
					
					//new scene
					scene = new THREE.Scene()
					camera = new THREE.
					  PerspectiveCamera(
					  75, 
					  width / height , //canvasContainer.offsetWidth / canvasContainer.offsetHeight,
					  0.1,
					  1000
					)
					
					scene . add ( new THREE . AmbientLight ( - 1 ) )
					
					/*
					const point_light = new THREE . PointLight ( - 1 )
					point_light . position . set ( 10 , 10 , - 10 )
					scene . add ( point_light )
					*/

					//new renderer
					gl_canvas          = document . createElement ( 'canvas' )
					gl_canvas . width  = width
					gl_canvas . height = height
					renderer                              = new THREE.WebGLRenderer ( { canvas : gl_canvas , alpha : true , antialias : false } )
					//renderer = new THREE.WebGLRenderer( /*{ canvas: document.querySelector('canvas') }*/ )
					renderer.setSize( width , height )//canvasContainer.offsetWidth, canvasContainer.offsetHeight)
					renderer . autoClear = false 
					//renderer.setPixelRatio(window.devicePixelRatio)
					canvasContainer . appendChild ( renderer . domElement )
					render_target = new THREE . WebGLRenderTarget ( width , height )
					
					scene2 = new THREE.Scene()
					camera2 = new THREE.
					  PerspectiveCamera(
					  50, 
					  width / height , //canvasContainer.offsetWidth / canvasContainer.offsetHeight,
					  0.01,
					  1000
					)
					camera2 . rotation . set ( 0 , Math . PI , 0 )
					//camera2 . lookAt ( scene2 . position )
					gl_canvas2          = document  . createElement ( 'canvas' )
					gl_canvas2 . width  = width
					gl_canvas2 . height = height
					renderer2           = new THREE . WebGLRenderer ( { canvas : gl_canvas2 , alpha : true , antialias : false } )
					renderer2  . setSize                            ( width , height )//canvasContainer.offsetWidth, canvasContainer.offsetHeight)					
					scene2     . add                                ( new THREE . AmbientLight () )
					const point_light   = new THREE . PointLight    ( - 1 , 1 , 0 , 1 )
					point_light . position . set ( 0 , 0 , 10 )
					scene2     . add                                ( point_light )

					raycaster = new THREE . Raycaster ()

					const controls = new THREE.OrbitControls(camera, canvas ) //renderer.domElement);
					controls.enableDamping = true;
					controls.dampingFactor = 0.05;
					controls.enableZoom = true;
					controls.enablePan = false;

					// create a sphere
					sphere = new THREE.Mesh(
					  new THREE.SphereGeometry(globe_radius, 50, 50),
					  new THREE.ShaderMaterial( {
						vertexShader : `
							varying vec2 vertexUV;
							varying vec3 vertexNormal;
							void main() {
							vertexUV = uv;
							vertexNormal = normalize(normalMatrix * normal);
							gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
						}` ,
						fragmentShader : `
							uniform sampler2D globeTexture;
							varying vec2 vertexUV;
							varying vec3 vertexNormal;
							void main() {
								float intensity = 1.05 - dot(vertexNormal, vec3(0.0, 0.0, 1.0 ));
								vec3 atmosphere = vec3(0.3, 0.6, 1.0) * pow(intensity, 1.5);
								gl_FragColor = vec4(atmosphere + texture2D(globeTexture, vertexUV).xyz, 1.0);
							}							
						` ,
						uniforms: {
						  globeTexture: {
							value: new THREE.TextureLoader().load('./assets/globe.jpeg')
						  }
						}
					  })
					)
					//scene.add(sphere)

					//clouds
					const clouds = new THREE.Mesh(
					  new THREE.SphereGeometry(globe_radius + 0.1, 50, 50),
					  new THREE.MeshBasicMaterial({
						map: new THREE.TextureLoader().load('./assets/earthCloud.png'),
						transparent: true,
						depthWrite : false
					  })
					)
					//scene.add(clouds)

					// create atmosphere
					const atmosphere = new THREE.Mesh(
					  new THREE.SphereGeometry(globe_radius, 50, 50),
					  new THREE.ShaderMaterial({
						vertexShader: `
							varying vec3 vertexNormal;

							void main() {
							vertexNormal = normalize(normalMatrix * normal);
								gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
							}						
						`,
						fragmentShader: `
							varying vec3 vertexNormal;
							void main() {
								float intensity = pow(0.95 - dot(vertexNormal, vec3(0, 0, 1.0
								)), 2.0);
								gl_FragColor = vec4(0.3, 0.6, 1.0, 1.0) * intensity;
							}						
						` ,
						blending: THREE.AdditiveBlending,
						side: THREE.BackSide
					  })
					)
					atmosphere.scale.set(1.1, 1.1, 1.1)
					scene.add(atmosphere)


					//create stars
/* 					const starGeometry = new THREE.BufferGeometry()
					const starMaterial = new THREE.PointsMaterial ({
					  color: 0xffffff
					})
					const starVertices = []
					for (let i = 0; i < 10000; i++) {
						const x = (Math.random() - 0.5) * 1000
						const y = (Math.random() - 0.5) * 1000
						const z = (Math.random() - 0.5) * 1000
						starVertices.push(x, y, z)
					}
					starGeometry.setAttribute('position', 
					  new THREE.Float32BufferAttribute(
					  starVertices, 3))
					  const stars = new THREE.Points(
						starGeometry, starMaterial)
						
						planet_clouds_stars_and_portal_group . add                     ( stars )
*/
					
					planet_clouds_stars_and_portal_group       = new THREE . Group ()
					planet_clouds_stars_and_portal_group . add                     ( sphere )
					planet_clouds_stars_and_portal_group . add                     ( clouds )
					
					camera.position.z = 100

					function createBoxes(countries){
						let creation = 0
					  countries.forEach(country => {
						const scale = country.population / 1000000000
						const lat = country.latlng[0]
						const lng = country.latlng[1]
						const zScale = 0.8 * scale
						
					/*
					  const box = new THREE.Mesh(
					  new THREE.BoxGeometry(
						Math.max(0.1, 0.1 * scale), 
						Math.max(0.1, 0.1 * scale), 
						Math.max(zScale, 0.4 * Math.random())
					  ),
					  new THREE.MeshBasicMaterial({
						color: '#3BF7FF',
						opacity: 0.4,
						transparent: true
					  })
					  )
					  const latitude = (lat / 180) * Math.PI
					  const longitude = (lng / 180) * Math.PI
					  const x = globe_radius * Math.cos(latitude) * Math.sin(longitude)
					  const y = globe_radius * Math.sin(latitude)
					  const z = globe_radius * Math.cos(latitude) * Math.cos(longitude)
					  box.position.x = x
					  box.position.y = y
					  box.position.z = z
					  box.lookAt(0, 0, 0)
					  box.geometry.applyMatrix4(new THREE.
						Matrix4().makeTranslation(0, 0, -zScale / 2))
					  group.add(box)
					//animation box scale
					  // gsap.to(box.scale, {
					  //   z: 1.4,
					  //   duration: 2,
					  //   yoyo: true,
					  //   repeat: -1,
					  //   ease: 'linear',
					  //   delay: Math.random()
					  // })
					  box.country = country.name //change this later
					  box.population = new Intl. NumberFormat().format(country.population)//change this later
					*/
					  const marker = new Marker ( { 
						description : country.name ,
						lat ,     //         : latitude , 
						lon : lng //         : longitude ,
					  } )
					  //scene . add ( marker . mesh )					  
					  
					  new Evento ( {
						creation ,
						lat ,
						lon : lng ,
						card_title : country.name ,
						card_subtitle: new Intl. NumberFormat().format(country.population),
					  } )
					  creation ++
					  } )
					  
						Rain ()
					  
					}
					
					fetch('./countries.json')
						.then((response) => response.json())
						.then((json) => createBoxes(json));					

					sphere.rotation.y = -Math.PI / 2
					//group.rotation.offset = { x: 0, y: 0 }

					const mouse = {
					  x: undefined,
					  y: undefined,
					  down: false,
					  xPrev: undefined,
					  yPrev: undefined
					}

					//const raycaster = new THREE.Raycaster();
					const popUpEl = document.querySelector('#popUpEl')
					const populationEl = document.querySelector('#populationEl') //change
					const populationValueEl = document.querySelector('#populationValueEl') //change

					canvasContainer.addEventListener("resize", onWindowResize, false);

					function onWindowResize() {
					  //camera.aspect = canvasContainer.offsetWidth / canvasContainer.offsetHeight;
					  //camera.updateProjectionMatrix();

					  //renderer.setSize(canvasContainer.offsetWidth, canvasContainer.offsetHeight);
					}

					//mobile resonsiveness
					//longitude and latitude to cartisan for portal
					function Lat_lon_to_cartesian(args){
					  const phi = (90 - args.lat ) * Math.PI / 180
					  const theta = (90 - args.lon ) * Math.PI / 180
					  return {
						x: globe_radius * Math.sin(phi) * Math.cos(theta),
						y: globe_radius * Math.cos(phi),
						z: globe_radius * Math.sin(phi) * Math.sin(theta)
					  }
					}

					//add Thanos Portal
					class Portal extends THREE.Group {
					  constructor ( args ) {
						super(args)
						
						this.scene = new THREE.Scene ()
						this.camera = new THREE.PerspectiveCamera(80, 1, 0.1, 10000)
						this.camera.position.z = 1000
						this.canvas  = document.createElement( 'canvas' )
						this.renderer = new THREE . WebGLRenderer( { canvas: this.canvas, alpha: true } )
						this.renderer.setClearAlpha ( 0 )
						
						this.clock = new THREE.Clock ()
						
						/*
						this.plane = new THREE.Mesh(new THREE.PlaneGeometry(args.radius, args.radius), 
						new THREE.MeshBasicMaterial( { transparent : true } ))
						this.add(this.plane)
						*/
						
						this . positions = new Float32Array ( [0,4.221639633178711,-2.6791343688964844,0,4.221639633178711,-2.6791343688964844,0,4.221639633178711,-2.6791343688964844,0,4.221639633178711,-2.6791343688964844,0,3.8525662422180176,-3.187120199203491,0,3.8525662422180176,-3.187120199203491,0,3.8525662422180176,-3.187120199203491,0,3.8525662422180176,-3.187120199203491,0.33578458428382874,4.221639633178711,-2.658008575439453,0.33578458428382874,4.221639633178711,-2.658008575439453,0.33578458428382874,4.221639633178711,-2.658008575439453,0.33578458428382874,4.221639633178711,-2.658008575439453,0.36834514141082764,4.0450849533081055,-2.9157519340515137,0.36834514141082764,4.0450849533081055,-2.9157519340515137,0.36834514141082764,4.0450849533081055,-2.9157519340515137,0.36834514141082764,4.0450849533081055,-2.9157519340515137,0.3994520902633667,3.8525662422180176,-3.1619889736175537,0.3994520902633667,3.8525662422180176,-3.1619889736175537,0.3994520902633667,3.8525662422180176,-3.1619889736175537,0.3994520902633667,3.8525662422180176,-3.1619889736175537,0.42898252606391907,3.644843101501465,-3.3957464694976807,0.42898252606391907,3.644843101501465,-3.3957464694976807,0.42898252606391907,3.644843101501465,-3.3957464694976807,0.42898252606391907,3.644843101501465,-3.3957464694976807,0.45681998133659363,3.4227356910705566,-3.616102457046509,0.45681998133659363,3.4227356910705566,-3.616102457046509,0.45681998133659363,3.4227356910705566,-3.616102457046509,0.45681998133659363,3.4227356910705566,-3.616102457046509,0.48285457491874695,3.187120199203491,-3.822187662124634,0.48285457491874695,3.187120199203491,-3.822187662124634,0.48285457491874695,3.187120199203491,-3.822187662124634,0.48285457491874695,3.187120199203491,-3.822187662124634,0.5069835782051086,2.9389262199401855,-4.013188362121582,0.5069835782051086,2.9389262199401855,-4.013188362121582,0.5069835782051086,2.9389262199401855,-4.013188362121582,0.5069835782051086,2.9389262199401855,-4.013188362121582,0.5291117429733276,2.6791343688964844,-4.188350677490234,0.5291117429733276,2.6791343688964844,-4.188350677490234,0.5291117429733276,2.6791343688964844,-4.188350677490234,0.5291117429733276,2.6791343688964844,-4.188350677490234,0.6662736535072327,4.221639633178711,-2.5949645042419434,0.6662736535072327,4.221639633178711,-2.5949645042419434,0.6662736535072327,4.221639633178711,-2.5949645042419434,0.6662736535072327,4.221639633178711,-2.5949645042419434,0.7308812141418457,4.0450849533081055,-2.8465945720672607,0.7308812141418457,4.0450849533081055,-2.8465945720672607,0.7308812141418457,4.0450849533081055,-2.8465945720672607,0.7308812141418457,4.0450849533081055,-2.8465945720672607,0.7926046252250671,3.8525662422180176,-3.086991310119629,0.7926046252250671,3.8525662422180176,-3.086991310119629,0.7926046252250671,3.8525662422180176,-3.086991310119629,0.7926046252250671,3.8525662422180176,-3.086991310119629,0.851199746131897,3.644843101501465,-3.315204381942749,0.851199746131897,3.644843101501465,-3.315204381942749,0.851199746131897,3.644843101501465,-3.315204381942749,0.851199746131897,3.644843101501465,-3.315204381942749,0.9064356088638306,3.4227356910705566,-3.5303337574005127,0.9064356088638306,3.4227356910705566,-3.5303337574005127,0.9064356088638306,3.4227356910705566,-3.5303337574005127,0.9064356088638306,3.4227356910705566,-3.5303337574005127,0.9580942392349243,3.187120199203491,-3.7315309047698975,0.9580942392349243,3.187120199203491,-3.7315309047698975,0.9580942392349243,3.187120199203491,-3.7315309047698975,0.9580942392349243,3.187120199203491,-3.7315309047698975,1.0059717893600464,2.9389262199401855,-3.918001413345337,1.0059717893600464,2.9389262199401855,-3.918001413345337,1.0059717893600464,2.9389262199401855,-3.918001413345337,1.0059717893600464,2.9389262199401855,-3.918001413345337,1.0498790740966797,2.6791343688964844,-4.0890092849731445,1.0498790740966797,2.6791343688964844,-4.0890092849731445,1.0498790740966797,2.6791343688964844,-4.0890092849731445,1.0498790740966797,2.6791343688964844,-4.0890092849731445,0.9862552285194397,4.221639633178711,-2.4909961223602295,0.9862552285194397,4.221639633178711,-2.4909961223602295,0.9862552285194397,4.221639633178711,-2.4909961223602295,0.9862552285194397,4.221639633178711,-2.4909961223602295,1.0818909406661987,4.0450849533081055,-2.7325446605682373,1.0818909406661987,4.0450849533081055,-2.7325446605682373,1.0818909406661987,4.0450849533081055,-2.7325446605682373,1.0818909406661987,4.0450849533081055,-2.7325446605682373,1.1732573509216309,3.8525662422180176,-2.9633097648620605,1.1732573509216309,3.8525662422180176,-2.9633097648620605,1.1732573509216309,3.8525662422180176,-2.9633097648620605,1.1732573509216309,3.8525662422180176,-2.9633097648620605,-0.9862558841705322,4.221639633178711,-2.4909980297088623,-0.9862558841705322,4.221639633178711,-2.4909980297088623,-0.9862558841705322,4.221639633178711,-2.4909980297088623,-0.9862558841705322,4.221639633178711,-2.4909980297088623,-1.0818923711776733,4.0450849533081055,-2.7325470447540283,-1.0818923711776733,4.0450849533081055,-2.7325470447540283,-1.0818923711776733,4.0450849533081055,-2.7325470447540283,-1.0818923711776733,4.0450849533081055,-2.7325470447540283,-1.173258900642395,3.8525662422180176,-2.9633140563964844,-1.173258900642395,3.8525662422180176,-2.9633140563964844,-1.173258900642395,3.8525662422180176,-2.9633140563964844,-1.173258900642395,3.8525662422180176,-2.9633140563964844,-0.6662741303443909,4.221639633178711,-2.5949666500091553,-0.6662741303443909,4.221639633178711,-2.5949666500091553,-0.6662741303443909,4.221639633178711,-2.5949666500091553,-0.6662741303443909,4.221639633178711,-2.5949666500091553,-0.7308824062347412,4.0450849533081055,-2.846597194671631,-0.7308824062347412,4.0450849533081055,-2.846597194671631,-0.7308824062347412,4.0450849533081055,-2.846597194671631,-0.7308824062347412,4.0450849533081055,-2.846597194671631,-0.7926056981086731,3.8525662422180176,-3.086995840072632,-0.7926056981086731,3.8525662422180176,-3.086995840072632,-0.7926056981086731,3.8525662422180176,-3.086995840072632,-0.7926056981086731,3.8525662422180176,-3.086995840072632,-0.8512005805969238,3.644843101501465,-3.315206527709961,-0.8512005805969238,3.644843101501465,-3.315206527709961,-0.8512005805969238,3.644843101501465,-3.315206527709961,-0.8512005805969238,3.644843101501465,-3.315206527709961,-0.9064372777938843,3.4227356910705566,-3.530336380004883,-0.9064372777938843,3.4227356910705566,-3.530336380004883,-0.9064372777938843,3.4227356910705566,-3.530336380004883,-0.9064372777938843,3.4227356910705566,-3.530336380004883,-0.9580956697463989,3.187120199203491,-3.731534957885742,-0.9580956697463989,3.187120199203491,-3.731534957885742,-0.9580956697463989,3.187120199203491,-3.731534957885742,-0.9580956697463989,3.187120199203491,-3.731534957885742,-1.0059731006622314,2.9389262199401855,-3.9180047512054443,-1.0059731006622314,2.9389262199401855,-3.9180047512054443,-1.0059731006622314,2.9389262199401855,-3.9180047512054443,-1.0059731006622314,2.9389262199401855,-3.9180047512054443,-1.0498803853988647,2.6791343688964844,-4.08901309967041,-1.0498803853988647,2.6791343688964844,-4.08901309967041,-1.0498803853988647,2.6791343688964844,-4.08901309967041,-1.0498803853988647,2.6791343688964844,-4.08901309967041,-0.33578482270240784,4.221639633178711,-2.658010959625244,-0.33578482270240784,4.221639633178711,-2.658010959625244,-0.33578482270240784,4.221639633178711,-2.658010959625244,-0.33578482270240784,4.221639633178711,-2.658010959625244,-0.3683459460735321,4.0450849533081055,-2.915754795074463,-0.3683459460735321,4.0450849533081055,-2.915754795074463,-0.3683459460735321,4.0450849533081055,-2.915754795074463,-0.3683459460735321,4.0450849533081055,-2.915754795074463,-0.3994526267051697,3.8525662422180176,-3.1619937419891357,-0.3994526267051697,3.8525662422180176,-3.1619937419891357,-0.3994526267051697,3.8525662422180176,-3.1619937419891357,-0.3994526267051697,3.8525662422180176,-3.1619937419891357,-0.42898306250572205,3.644843101501465,-3.3957488536834717,-0.42898306250572205,3.644843101501465,-3.3957488536834717,-0.42898306250572205,3.644843101501465,-3.3957488536834717,-0.42898306250572205,3.644843101501465,-3.3957488536834717,-0.4568213224411011,3.4227356910705566,-3.616105318069458,-0.4568213224411011,3.4227356910705566,-3.616105318069458,-0.4568213224411011,3.4227356910705566,-3.616105318069458,-0.4568213224411011,3.4227356910705566,-3.616105318069458,-0.48285549879074097,3.187120199203491,-3.8221919536590576,-0.48285549879074097,3.187120199203491,-3.8221919536590576,-0.48285549879074097,3.187120199203491,-3.8221919536590576,-0.48285549879074097,3.187120199203491,-3.8221919536590576,-0.506984531879425,2.9389262199401855,-4.013192176818848,-0.506984531879425,2.9389262199401855,-4.013192176818848,-0.506984531879425,2.9389262199401855,-4.013192176818848,-0.506984531879425,2.9389262199401855,-4.013192176818848,-0.5291125178337097,2.6791343688964844,-4.188355445861816,-0.5291125178337097,2.6791343688964844,-4.188355445861816,-0.5291125178337097,2.6791343688964844,-4.188355445861816,-0.5291125178337097,2.6791343688964844,-4.188355445861816,-4.470348358154297e-7,4.0450849533081055,-2.938929319381714,-4.470348358154297e-7,4.0450849533081055,-2.938929319381714,-4.470348358154297e-7,4.0450849533081055,-2.938929319381714,-4.470348358154297e-7,4.0450849533081055,-2.938929319381714,-2.086162567138672e-7,3.644843101501465,-3.4227383136749268,-2.086162567138672e-7,3.644843101501465,-3.4227383136749268,-2.086162567138672e-7,3.644843101501465,-3.4227383136749268,-2.086162567138672e-7,3.644843101501465,-3.4227383136749268,-9.834766387939453e-7,3.4227356910705566,-3.644846200942993,-9.834766387939453e-7,3.4227356910705566,-3.644846200942993,-9.834766387939453e-7,3.4227356910705566,-3.644846200942993,-9.834766387939453e-7,3.4227356910705566,-3.644846200942993,-3.5762786865234375e-7,3.187120199203491,-3.8525707721710205,-3.5762786865234375e-7,3.187120199203491,-3.8525707721710205,-3.5762786865234375e-7,3.187120199203491,-3.8525707721710205,-3.5762786865234375e-7,3.187120199203491,-3.8525707721710205,-4.172325134277344e-7,2.9389262199401855,-4.045089244842529,-4.172325134277344e-7,2.9389262199401855,-4.045089244842529,-4.172325134277344e-7,2.9389262199401855,-4.045089244842529,-4.172325134277344e-7,2.9389262199401855,-4.045089244842529,-1.7881393432617188e-7,2.6791343688964844,-4.221644401550293,-1.7881393432617188e-7,2.6791343688964844,-4.221644401550293,-1.7881393432617188e-7,2.6791343688964844,-4.221644401550293,-1.7881393432617188e-7,2.6791343688964844,-4.221644401550293,-3.9725159695080947e-7,2.5375871658325195,-4.305354118347168,-3.9725159695080947e-7,2.5375871658325195,-4.305354118347168,0.5411895513534546,2.5161890983581543,-4.283956050872803,0.5411895513534546,2.5161890983581543,-4.283956050872803,0,4.305351734161377,-2.5375847816467285,0,4.305351734161377,-2.5375847816467285,0.31962746381759644,4.297878742218018,-2.530111789703369,0.31962746381759644,4.297878742218018,-2.530111789703369,1.083345651626587,2.4515860080718994,-4.219352722167969,1.083345651626587,2.4515860080718994,-4.219352722167969,0.6437810063362122,4.275128364562988,-2.50736141204834,0.6437810063362122,4.275128364562988,-2.50736141204834,0.977271318435669,4.236072540283203,-2.4683053493499756,0.977271318435669,4.236072540283203,-2.4683053493499756,1.25,3.644843101501465,-3.185626268386841,1.25,3.644843101501465,-3.185626268386841,1.25,3.6687755584716797,-3.157139539718628,1.25,3.6687755584716797,-3.157139539718628,1.25,3.4227356910705566,-3.4187028408050537,1.25,3.4227356910705566,-3.4187028408050537,1.25,3.187120199203491,-3.6366851329803467,1.25,3.187120199203491,-3.6366851329803467,1.25,2.9389262199401855,-3.838711977005005,1.25,2.9389262199401855,-3.838711977005005,1.25,2.6791343688964844,-4.023986339569092,1.25,2.6791343688964844,-4.023986339569092,1.25,2.418172836303711,-4.185939788818359,1.0651466846466064,4.221639633178711,-2.4538726806640625,1.0651466846466064,4.221639633178711,-2.4538726806640625,1.25,4.188477516174316,-2.420710325241089,1.25,4.0450849533081055,-2.6534385681152344,1.25,4.0450849533081055,-2.6534385681152344,1.25,3.8525662422180176,-2.9271974563598633,1.25,3.8525662422180176,-2.9271974563598633,-1.065151333808899,4.221639633178711,-2.4538726806640625,-1.065151333808899,4.221639633178711,-2.4538726806640625,-0.9772714972496033,4.236073017120361,-2.468306064605713,-0.9772714972496033,4.236073017120361,-2.468306064605713,-1.25,4.188477993011475,-2.4207112789154053,-1.25,4.0450849533081055,-2.6534414291381836,-1.25,4.0450849533081055,-2.6534414291381836,-1.25,3.8525662422180176,-2.9272024631500244,-1.25,3.8525662422180176,-2.9272024631500244,-1.25,3.66877818107605,-3.1571390628814697,-1.25,3.66877818107605,-3.1571390628814697,-0.6437810659408569,4.2751288414001465,-2.507362127304077,-0.6437810659408569,4.2751288414001465,-2.507362127304077,-1.25,3.644843101501465,-3.185628652572632,-1.25,3.644843101501465,-3.185628652572632,-1.25,3.4227356910705566,-3.418705940246582,-1.25,3.4227356910705566,-3.418705940246582,-1.25,3.187120199203491,-3.6366894245147705,-1.25,3.187120199203491,-3.6366894245147705,-1.25,2.9389262199401855,-3.8387155532836914,-1.25,2.9389262199401855,-3.8387155532836914,-1.25,2.6791343688964844,-4.023990154266357,-1.25,2.6791343688964844,-4.023990154266357,-1.25,2.4181745052337646,-4.185941696166992,-1.0833466053009033,2.451587677001953,-4.219354629516602,-1.0833466053009033,2.451587677001953,-4.219354629516602,-0.5411902070045471,2.5161914825439453,-4.283958435058594,-0.5411902070045471,2.5161914825439453,-4.283958435058594,-0.31962743401527405,4.297879219055176,-2.5301122665405273,-0.31962743401527405,4.297879219055176,-2.5301122665405273] )
						this . normals   = new Float32Array ( [-0.03533968701958656,0.8265650868415833,-0.5617305636405945,-0.032006025314331055,0.8603018522262573,-0.5087792873382568,0.03200969099998474,0.8603009581565857,-0.5087805986404419,0.03534403070807457,0.826564610004425,-0.5617310404777527,-0.041566718369722366,0.7494622468948364,-0.660740852355957,-0.03852872550487518,0.7895684242248535,-0.61245197057724,0.0385342575609684,0.7895670533180237,-0.612453281879425,0.04157208651304245,0.7494641542434692,-0.6607383489608765,0.03200969099998474,0.8603009581565857,-0.5087805986404419,0.03534403070807457,0.826564610004425,-0.5617310404777527,0.09552336484193802,0.8603009581565857,-0.5007568597793579,0.10546694695949554,0.8265633583068848,-0.5528740882873535,0.03534403070807457,0.826564610004425,-0.5617310404777527,0.0385342575609684,0.7895670533180237,-0.612453281879425,0.10546694695949554,0.8265633583068848,-0.5528740882873535,0.11498888581991196,0.7895691394805908,-0.6027920246124268,0.0385342575609684,0.7895670533180237,-0.612453281879425,0.04157208651304245,0.7494641542434692,-0.6607383489608765,0.11498888581991196,0.7895691394805908,-0.6027920246124268,0.12405538558959961,0.7494619488716125,-0.650320827960968,0.04157208651304245,0.7494641542434692,-0.6607383489608765,0.044447820633649826,0.7064083814620972,-0.7064074873924255,0.12405538558959961,0.7494619488716125,-0.650320827960968,0.13262896239757538,0.7064080834388733,-0.6952676773071289,0.044447820633649826,0.7064083814620972,-0.7064074873924255,0.047146592289209366,0.6605784296989441,-0.749275267124176,0.13262896239757538,0.7064080834388733,-0.6952676773071289,0.14067819714546204,0.6605768799781799,-0.7374603152275085,0.047146592289209366,0.6605784296989441,-0.749275267124176,0.049657758325338364,0.6121501922607422,-0.7891808152198792,0.14067819714546204,0.6605768799781799,-0.7374603152275085,0.14816997945308685,0.6121505498886108,-0.7767350673675537,0.049657758325338364,0.6121501922607422,-0.7891808152198792,0.05197243392467499,0.5613248348236084,-0.8259620070457458,0.14816997945308685,0.6121505498886108,-0.7767350673675537,0.15507586300373077,0.5613253712654114,-0.8129361867904663,0.05197243392467499,0.5613248348236084,-0.8259620070457458,0.054081179201602936,0.5082942247390747,-0.8594837188720703,0.15507586300373077,0.5613253712654114,-0.8129361867904663,0.161369189620018,0.5082952976226807,-0.8459290266036987,0.09552336484193802,0.8603009581565857,-0.5007568597793579,0.10546694695949554,0.8265633583068848,-0.5528740882873535,0.15753324329853058,0.8603004813194275,-0.4848363399505615,0.17392843961715698,0.8265634179115295,-0.5352960228919983,0.10546694695949554,0.8265633583068848,-0.5528740882873535,0.11498888581991196,0.7895691394805908,-0.6027920246124268,0.17392843961715698,0.8265634179115295,-0.5352960228919983,0.18963247537612915,0.7895689010620117,-0.5836270451545715,0.11498888581991196,0.7895691394805908,-0.6027920246124268,0.12405538558959961,0.7494619488716125,-0.650320827960968,0.18963247537612915,0.7895689010620117,-0.5836270451545715,0.20458289980888367,0.7494627237319946,-0.6296440362930298,0.12405538558959961,0.7494619488716125,-0.650320827960968,0.13262896239757538,0.7064080834388733,-0.6952676773071289,0.20458289980888367,0.7494627237319946,-0.6296440362930298,0.2187238186597824,0.7064082026481628,-0.6731621623039246,0.13262896239757538,0.7064080834388733,-0.6952676773071289,0.14067819714546204,0.6605768799781799,-0.7374603152275085,0.2187238186597824,0.7064082026481628,-0.6731621623039246,0.23199625313282013,0.6605774164199829,-0.7140135169029236,0.14067819714546204,0.6605768799781799,-0.7374603152275085,0.14816997945308685,0.6121505498886108,-0.7767350673675537,0.23199625313282013,0.6605774164199829,-0.7140135169029236,0.24435298144817352,0.6121498942375183,-0.7520399689674377,0.14816997945308685,0.6121505498886108,-0.7767350673675537,0.15507586300373077,0.5613253712654114,-0.8129361867904663,0.24435298144817352,0.6121498942375183,-0.7520399689674377,0.2557406723499298,0.5613244771957397,-0.787090539932251,0.15507586300373077,0.5613253712654114,-0.8129361867904663,0.161369189620018,0.5082952976226807,-0.8459290266036987,0.2557406723499298,0.5613244771957397,-0.787090539932251,0.2661193609237671,0.5082955956459045,-0.8190335631370544,0.15753324329853058,0.8603004813194275,-0.4848363399505615,0.17392843961715698,0.8265634179115295,-0.5352960228919983,0.21706077456474304,0.8602989315986633,-0.46127036213874817,0.2396460622549057,0.826563835144043,-0.5092760324478149,0.17392843961715698,0.8265634179115295,-0.5352960228919983,0.18963247537612915,0.7895689010620117,-0.5836270451545715,0.2396460622549057,0.826563835144043,-0.5092760324478149,0.2612851858139038,0.7895686030387878,-0.5552580952644348,0.18963247537612915,0.7895689010620117,-0.5836270451545715,0.20458289980888367,0.7494627237319946,-0.6296440362930298,0.2612851858139038,0.7895686030387878,-0.5552580952644348,0.28188568353652954,0.7494619488716125,-0.5990387201309204,-0.23964616656303406,0.8265641927719116,-0.5092753767967224,-0.21704185009002686,0.8603085279464722,-0.46126145124435425,-0.17392894625663757,0.8265641927719116,-0.5352945923805237,-0.1575312614440918,0.8603034019470215,-0.48483186960220337,-0.2612854540348053,0.7895703911781311,-0.5552552938461304,-0.23964616656303406,0.8265641927719116,-0.5092753767967224,-0.18963097035884857,0.7895710468292236,-0.583624541759491,-0.17392894625663757,0.8265641927719116,-0.5352945923805237,-0.2818862199783325,0.7494586706161499,-0.5990424156188965,-0.2612854540348053,0.7895703911781311,-0.5552552938461304,-0.20458517968654633,0.7494590878486633,-0.6296474933624268,-0.18963097035884857,0.7895710468292236,-0.583624541759491,-0.17392894625663757,0.8265641927719116,-0.5352945923805237,-0.1575312614440918,0.8603034019470215,-0.48483186960220337,-0.10546661168336868,0.8265641927719116,-0.5528727769851685,-0.09552427381277084,0.8603023886680603,-0.5007544159889221,-0.18963097035884857,0.7895710468292236,-0.583624541759491,-0.17392894625663757,0.8265641927719116,-0.5352945923805237,-0.1149887964129448,0.7895710468292236,-0.6027895212173462,-0.10546661168336868,0.8265641927719116,-0.5528727769851685,-0.20458517968654633,0.7494590878486633,-0.6296474933624268,-0.18963097035884857,0.7895710468292236,-0.583624541759491,-0.1240559071302414,0.7494587898254395,-0.6503241658210754,-0.1149887964129448,0.7895710468292236,-0.6027895212173462,-0.2187233865261078,0.7064089775085449,-0.673161506652832,-0.20458517968654633,0.7494590878486633,-0.6296474933624268,-0.1326296031475067,0.7064085602760315,-0.6952670812606812,-0.1240559071302414,0.7494587898254395,-0.6503241658210754,-0.231996551156044,0.6605790257453918,-0.7140119075775146,-0.2187233865261078,0.7064089775085449,-0.673161506652832,-0.14067797362804413,0.6605799794197083,-0.7374576330184937,-0.1326296031475067,0.7064085602760315,-0.6952670812606812,-0.24435248970985413,0.6121501922607422,-0.752039909362793,-0.231996551156044,0.6605790257453918,-0.7140119075775146,-0.1481703668832779,0.6121495366096497,-0.7767357230186462,-0.14067797362804413,0.6605799794197083,-0.7374576330184937,-0.25574153661727905,0.5613248348236084,-0.787090003490448,-0.24435248970985413,0.6121501922607422,-0.752039909362793,-0.155076801776886,0.5613254904747009,-0.812936007976532,-0.1481703668832779,0.6121495366096497,-0.7767357230186462,-0.26612114906311035,0.5082922577857971,-0.8190351724624634,-0.25574153661727905,0.5613248348236084,-0.787090003490448,-0.16137033700942993,0.5082932114601135,-0.8459299802780151,-0.155076801776886,0.5613254904747009,-0.812936007976532,-0.10546661168336868,0.8265641927719116,-0.5528727769851685,-0.09552427381277084,0.8603023886680603,-0.5007544159889221,-0.03533968701958656,0.8265650868415833,-0.5617305636405945,-0.032006025314331055,0.8603018522262573,-0.5087792873382568,-0.1149887964129448,0.7895710468292236,-0.6027895212173462,-0.10546661168336868,0.8265641927719116,-0.5528727769851685,-0.03852872550487518,0.7895684242248535,-0.61245197057724,-0.03533968701958656,0.8265650868415833,-0.5617305636405945,-0.1240559071302414,0.7494587898254395,-0.6503241658210754,-0.1149887964129448,0.7895710468292236,-0.6027895212173462,-0.041566718369722366,0.7494622468948364,-0.660740852355957,-0.03852872550487518,0.7895684242248535,-0.61245197057724,-0.1326296031475067,0.7064085602760315,-0.6952670812606812,-0.1240559071302414,0.7494587898254395,-0.6503241658210754,-0.04444354027509689,0.7064089775085449,-0.7064071297645569,-0.041566718369722366,0.7494622468948364,-0.660740852355957,-0.14067797362804413,0.6605799794197083,-0.7374576330184937,-0.1326296031475067,0.7064085602760315,-0.6952670812606812,-0.047140933573246,0.660579264163971,-0.7492747902870178,-0.04444354027509689,0.7064089775085449,-0.7064071297645569,-0.1481703668832779,0.6121495366096497,-0.7767357230186462,-0.14067797362804413,0.6605799794197083,-0.7374576330184937,-0.049651648849248886,0.6121498942375183,-0.7891813516616821,-0.047140933573246,0.660579264163971,-0.7492747902870178,-0.155076801776886,0.5613254904747009,-0.812936007976532,-0.1481703668832779,0.6121495366096497,-0.7767357230186462,-0.05196559801697731,0.5613263249397278,-0.8259614109992981,-0.049651648849248886,0.6121498942375183,-0.7891813516616821,-0.16137033700942993,0.5082932114601135,-0.8459299802780151,-0.155076801776886,0.5613254904747009,-0.812936007976532,-0.05407431721687317,0.5082916021347046,-0.8594857454299927,-0.05196559801697731,0.5613263249397278,-0.8259614109992981,-0.03852872550487518,0.7895684242248535,-0.61245197057724,-0.03533968701958656,0.8265650868415833,-0.5617305636405945,0.03534403070807457,0.826564610004425,-0.5617310404777527,0.0385342575609684,0.7895670533180237,-0.612453281879425,-0.04444354027509689,0.7064089775085449,-0.7064071297645569,-0.041566718369722366,0.7494622468948364,-0.660740852355957,0.04157208651304245,0.7494641542434692,-0.6607383489608765,0.044447820633649826,0.7064083814620972,-0.7064074873924255,-0.047140933573246,0.660579264163971,-0.7492747902870178,-0.04444354027509689,0.7064089775085449,-0.7064071297645569,0.044447820633649826,0.7064083814620972,-0.7064074873924255,0.047146592289209366,0.6605784296989441,-0.749275267124176,-0.049651648849248886,0.6121498942375183,-0.7891813516616821,-0.047140933573246,0.660579264163971,-0.7492747902870178,0.047146592289209366,0.6605784296989441,-0.749275267124176,0.049657758325338364,0.6121501922607422,-0.7891808152198792,-0.05196559801697731,0.5613263249397278,-0.8259614109992981,-0.049651648849248886,0.6121498942375183,-0.7891813516616821,0.049657758325338364,0.6121501922607422,-0.7891808152198792,0.05197243392467499,0.5613248348236084,-0.8259620070457458,-0.05407431721687317,0.5082916021347046,-0.8594857454299927,-0.05196559801697731,0.5613263249397278,-0.8259614109992981,0.05197243392467499,0.5613248348236084,-0.8259620070457458,0.054081179201602936,0.5082942247390747,-0.8594837188720703,-0.05407431721687317,0.5082916021347046,-0.8594857454299927,0.054081179201602936,0.5082942247390747,-0.8594837188720703,0.054081179201602936,0.5082942247390747,-0.8594837188720703,0.161369189620018,0.5082952976226807,-0.8459290266036987,-0.032006025314331055,0.8603018522262573,-0.5087792873382568,0.03200969099998474,0.8603009581565857,-0.5087805986404419,0.03200969099998474,0.8603009581565857,-0.5087805986404419,0.09552336484193802,0.8603009581565857,-0.5007568597793579,0.161369189620018,0.5082952976226807,-0.8459290266036987,0.2661193609237671,0.5082955956459045,-0.8190335631370544,0.09552336484193802,0.8603009581565857,-0.5007568597793579,0.15753324329853058,0.8603004813194275,-0.4848363399505615,0.15753324329853058,0.8603004813194275,-0.4848363399505615,0.21706077456474304,0.8602989315986633,-0.46127036213874817,0.20458289980888367,0.7494627237319946,-0.6296440362930298,0.2187238186597824,0.7064082026481628,-0.6731621623039246,0.20458289980888367,0.7494627237319946,-0.6296440362930298,0.28188568353652954,0.7494619488716125,-0.5990387201309204,0.2187238186597824,0.7064082026481628,-0.6731621623039246,0.23199625313282013,0.6605774164199829,-0.7140135169029236,0.23199625313282013,0.6605774164199829,-0.7140135169029236,0.24435298144817352,0.6121498942375183,-0.7520399689674377,0.24435298144817352,0.6121498942375183,-0.7520399689674377,0.2557406723499298,0.5613244771957397,-0.787090539932251,0.2557406723499298,0.5613244771957397,-0.787090539932251,0.2661193609237671,0.5082955956459045,-0.8190335631370544,0.2661193609237671,0.5082955956459045,-0.8190335631370544,0.21706077456474304,0.8602989315986633,-0.46127036213874817,0.2396460622549057,0.826563835144043,-0.5092760324478149,0.2396460622549057,0.826563835144043,-0.5092760324478149,0.2396460622549057,0.826563835144043,-0.5092760324478149,0.2612851858139038,0.7895686030387878,-0.5552580952644348,0.2612851858139038,0.7895686030387878,-0.5552580952644348,0.28188568353652954,0.7494619488716125,-0.5990387201309204,-0.23964616656303406,0.8265641927719116,-0.5092753767967224,-0.21704185009002686,0.8603085279464722,-0.46126145124435425,-0.21704185009002686,0.8603085279464722,-0.46126145124435425,-0.1575312614440918,0.8603034019470215,-0.48483186960220337,-0.23964616656303406,0.8265641927719116,-0.5092753767967224,-0.2612854540348053,0.7895703911781311,-0.5552552938461304,-0.23964616656303406,0.8265641927719116,-0.5092753767967224,-0.2818862199783325,0.7494586706161499,-0.5990424156188965,-0.2612854540348053,0.7895703911781311,-0.5552552938461304,-0.2818862199783325,0.7494586706161499,-0.5990424156188965,-0.20458517968654633,0.7494590878486633,-0.6296474933624268,-0.1575312614440918,0.8603034019470215,-0.48483186960220337,-0.09552427381277084,0.8603023886680603,-0.5007544159889221,-0.2187233865261078,0.7064089775085449,-0.673161506652832,-0.20458517968654633,0.7494590878486633,-0.6296474933624268,-0.231996551156044,0.6605790257453918,-0.7140119075775146,-0.2187233865261078,0.7064089775085449,-0.673161506652832,-0.24435248970985413,0.6121501922607422,-0.752039909362793,-0.231996551156044,0.6605790257453918,-0.7140119075775146,-0.25574153661727905,0.5613248348236084,-0.787090003490448,-0.24435248970985413,0.6121501922607422,-0.752039909362793,-0.26612114906311035,0.5082922577857971,-0.8190351724624634,-0.25574153661727905,0.5613248348236084,-0.787090003490448,-0.26612114906311035,0.5082922577857971,-0.8190351724624634,-0.26612114906311035,0.5082922577857971,-0.8190351724624634,-0.16137033700942993,0.5082932114601135,-0.8459299802780151,-0.16137033700942993,0.5082932114601135,-0.8459299802780151,-0.05407431721687317,0.5082916021347046,-0.8594857454299927,-0.09552427381277084,0.8603023886680603,-0.5007544159889221,-0.032006025314331055,0.8603018522262573,-0.5087792873382568] )
						this . uvs       = new Float32Array ( [0.4999999701976776,0.9335423707962036,0.4999999701976776,0.9335423707962036,0.4999999701976776,0.9335423707962036,0.4999999701976776,0.9335423707962036,0.4999999701976776,0.6846699714660645,0.4999999701976776,0.6846699714660645,0.4999999701976776,0.6846699714660645,0.4999999701976776,0.6846699714660645,0.3656861186027527,0.9397132396697998,0.3656861186027527,0.9397132396697998,0.3656861186027527,0.9397132396697998,0.3656861186027527,0.9397132396697998,0.3526618480682373,0.8163548707962036,0.3526618480682373,0.8163548707962036,0.3526618480682373,0.8163548707962036,0.3526618480682373,0.8163548707962036,0.3402191400527954,0.6920109987258911,0.3402191400527954,0.6920109987258911,0.3402191400527954,0.6920109987258911,0.3402191400527954,0.6920109987258911,0.3284069895744324,0.5671727657318115,0.3284069895744324,0.5671727657318115,0.3284069895744324,0.5671727657318115,0.3284069895744324,0.5671727657318115,0.31727200746536255,0.44233250617980957,0.31727200746536255,0.44233250617980957,0.31727200746536255,0.44233250617980957,0.31727200746536255,0.44233250617980957,0.3068581223487854,0.3179832696914673,0.3068581223487854,0.3179832696914673,0.3068581223487854,0.3179832696914673,0.3068581223487854,0.3179832696914673,0.2972065806388855,0.1946154236793518,0.2972065806388855,0.1946154236793518,0.2972065806388855,0.1946154236793518,0.2972065806388855,0.1946154236793518,0.28835529088974,0.07271623611450195,0.28835529088974,0.07271623611450195,0.28835529088974,0.07271623611450195,0.28835529088974,0.07271623611450195,0.2334904670715332,0.9581286907196045,0.2334904670715332,0.9581286907196045,0.2334904670715332,0.9581286907196045,0.2334904670715332,0.9581286907196045,0.20764750242233276,0.8365560173988342,0.20764750242233276,0.8365560173988342,0.20764750242233276,0.8365560173988342,0.20764750242233276,0.8365560173988342,0.18295818567276,0.7139179706573486,0.18295818567276,0.7139179706573486,0.18295818567276,0.7139179706573486,0.18295818567276,0.7139179706573486,0.15952008962631226,0.590699315071106,0.15952008962631226,0.590699315071106,0.15952008962631226,0.590699315071106,0.15952008962631226,0.590699315071106,0.1374257206916809,0.46738600730895996,0.1374257206916809,0.46738600730895996,0.1374257206916809,0.46738600730895996,0.1374257206916809,0.46738600730895996,0.11676228046417236,0.3444644808769226,0.11676228046417236,0.3444644808769226,0.11676228046417236,0.3444644808769226,0.11676228046417236,0.3444644808769226,0.0976111888885498,0.2224198579788208,0.0976111888885498,0.2224198579788208,0.0976111888885498,0.2224198579788208,0.0976111888885498,0.2224198579788208,0.0800483226776123,0.10173439979553223,0.0800483226776123,0.10173439979553223,0.0800483226776123,0.10173439979553223,0.0800483226776123,0.10173439979553223,0.10549783706665039,0.9884982109069824,0.10549783706665039,0.9884982109069824,0.10549783706665039,0.9884982109069824,0.10549783706665039,0.9884982109069824,0.06724351644515991,0.8698704242706299,0.06724351644515991,0.8698704242706299,0.06724351644515991,0.8698704242706299,0.06724351644515991,0.8698704242706299,0.030696988105773926,0.7500459551811218,0.030696988105773926,0.7500459551811218,0.030696988105773926,0.7500459551811218,0.030696988105773926,0.7500459551811218,0.8945022821426392,0.9884978532791138,0.8945022821426392,0.9884978532791138,0.8945022821426392,0.9884978532791138,0.8945022821426392,0.9884978532791138,0.9327569007873535,0.8698697090148926,0.9327569007873535,0.8698697090148926,0.9327569007873535,0.8698697090148926,0.9327569007873535,0.8698697090148926,0.9693034887313843,0.7500447034835815,0.9693034887313843,0.7500447034835815,0.9693034887313843,0.7500447034835815,0.9693034887313843,0.7500447034835815,0.7665095329284668,0.9581280946731567,0.7665095329284668,0.9581280946731567,0.7665095329284668,0.9581280946731567,0.7665095329284668,0.9581280946731567,0.7923529148101807,0.8365552425384521,0.7923529148101807,0.8365552425384521,0.7923529148101807,0.8365552425384521,0.7923529148101807,0.8365552425384521,0.8170422315597534,0.7139168381690979,0.8170422315597534,0.7139168381690979,0.8170422315597534,0.7139168381690979,0.8170422315597534,0.7139168381690979,0.8404802083969116,0.5906988382339478,0.8404802083969116,0.5906988382339478,0.8404802083969116,0.5906988382339478,0.8404802083969116,0.5906988382339478,0.8625748157501221,0.4673852324485779,0.8625748157501221,0.4673852324485779,0.8625748157501221,0.4673852324485779,0.8625748157501221,0.4673852324485779,0.8832381963729858,0.3444632887840271,0.8832381963729858,0.3444632887840271,0.8832381963729858,0.3444632887840271,0.8832381963729858,0.3444632887840271,0.9023892879486084,0.2224189043045044,0.9023892879486084,0.2224189043045044,0.9023892879486084,0.2224189043045044,0.9023892879486084,0.2224189043045044,0.9199520945549011,0.10173314809799194,0.9199520945549011,0.10173314809799194,0.9199520945549011,0.10173314809799194,0.9199520945549011,0.10173314809799194,0.6343139410018921,0.9397125244140625,0.6343139410018921,0.9397125244140625,0.6343139410018921,0.9397125244140625,0.6343139410018921,0.9397125244140625,0.647338330745697,0.8163540363311768,0.647338330745697,0.8163540363311768,0.647338330745697,0.8163540363311768,0.647338330745697,0.8163540363311768,0.6597809791564941,0.6920095086097717,0.6597809791564941,0.6920095086097717,0.6597809791564941,0.6920095086097717,0.6597809791564941,0.6920095086097717,0.671593189239502,0.5671719312667847,0.671593189239502,0.5671719312667847,0.671593189239502,0.5671719312667847,0.671593189239502,0.5671719312667847,0.6827285289764404,0.44233179092407227,0.6827285289764404,0.44233179092407227,0.6827285289764404,0.44233179092407227,0.6827285289764404,0.44233179092407227,0.6931421756744385,0.31798213720321655,0.6931421756744385,0.31798213720321655,0.6931421756744385,0.31798213720321655,0.6931421756744385,0.31798213720321655,0.7027937769889832,0.19461429119110107,0.7027937769889832,0.19461429119110107,0.7027937769889832,0.19461429119110107,0.7027937769889832,0.19461429119110107,0.7116450071334839,0.0727149248123169,0.7116450071334839,0.0727149248123169,0.7116450071334839,0.0727149248123169,0.7116450071334839,0.0727149248123169,0.5000001192092896,0.8095846772193909,0.5000001192092896,0.8095846772193909,0.5000001192092896,0.8095846772193909,0.5000001192092896,0.8095846772193909,0.5000001192092896,0.5592882633209229,0.5000001192092896,0.5592882633209229,0.5000001192092896,0.5592882633209229,0.5000001192092896,0.5592882633209229,0.5000003576278687,0.4339364171028137,0.5000003576278687,0.4339364171028137,0.5000003576278687,0.4339364171028137,0.5000003576278687,0.4339364171028137,0.5000001192092896,0.30910831689834595,0.5000001192092896,0.30910831689834595,0.5000001192092896,0.30910831689834595,0.5000001192092896,0.30910831689834595,0.5000001192092896,0.18529701232910156,0.5000001192092896,0.18529701232910156,0.5000001192092896,0.18529701232910156,0.5000001192092896,0.18529701232910156,0.5000001192092896,0.06299114227294922,0.5000001192092896,0.06299114227294922,0.5000001192092896,0.06299114227294922,0.5000001192092896,0.06299114227294922,0.5000001192092896,0,0.5000001192092896,0,0.2835240960121155,0.00042444467544555664,0.2835240960121155,0.00042444467544555664,0.4999999701976776,0.9976818561553955,0.4999999701976776,0.9976818561553955,0.37214893102645874,0.9978300333023071,0.37214893102645874,0.9978300333023071,0.06666165590286255,0.0017058253288269043,0.06666165590286255,0.0017058253288269043,0.24248754978179932,0.9982812404632568,0.24248754978179932,0.9982812404632568,0.10909140110015869,0.9990561008453369,0.10909140110015869,0.9990561008453369,0,0.6285496354103088,0,0.6285496354103088,0,0.6433868408203125,0,0.6433868408203125,0,0.49999380111694336,0,0.49999380111694336,0,0.37216925621032715,0,0.37216925621032715,0,0.24558067321777344,0,0.24558067321777344,0,0.12072771787643433,0,0.12072771787643433,0,0.0023685097694396973,0.073941171169281,0.9993422031402588,0.073941171169281,0.9993422031402588,0,1,0,0.8929775953292847,0,0.8929775953292847,0,0.7605944871902466,0,0.7605944871902466,0.9260604381561279,0.9993422031402588,0.9260604381561279,0.9993422031402588,0.8909085988998413,0.9990559816360474,0.8909085988998413,0.9990559816360474,0.9999999403953552,0.9999997615814209,0.9999999403953552,0.8929767608642578,0.9999999403953552,0.8929767608642578,0.9999999403953552,0.7605929970741272,0.9999999403953552,0.7605929970741272,0.9999999403953552,0.6433876752853394,0.9999999403953552,0.6433876752853394,0.7575123310089111,0.9982812404632568,0.7575123310089111,0.9982812404632568,0.9999999403953552,0.6285489797592163,0.9999999403953552,0.6285489797592163,0.9999999403953552,0.49999284744262695,0.9999999403953552,0.49999284744262695,0.9999999403953552,0.37216806411743164,0.9999999403953552,0.37216806411743164,0.9999999403953552,0.24557965993881226,0.9999999403953552,0.24557965993881226,0.9999999403953552,0.12072652578353882,0.9999999403953552,0.12072652578353882,0.9999999403953552,0.002368330955505371,0.9333386421203613,0.0017058253288269043,0.9333386421203613,0.0017058253288269043,0.7164760231971741,0.00042444467544555664,0.7164760231971741,0.00042444467544555664,0.6278508901596069,0.9978300333023071,0.6278508901596069,0.9978300333023071] )
						this . indexes   = [6,163,13,6,13,16,166,7,17,166,17,20,170,167,21,170,21,24,174,171,25,174,25,28,178,175,29,178,29,32,182,179,33,182,33,36,185,183,37,185,37,186,190,8,2,190,2,189,162,3,9,162,9,12,30,27,57,30,57,60,34,31,61,34,61,64,38,35,65,38,65,68,39,69,192,39,192,187,194,40,10,194,10,191,14,11,41,14,41,44,18,15,45,18,45,48,22,19,49,22,49,52,26,23,53,26,53,56,196,72,42,196,42,195,46,43,73,46,73,76,50,47,77,50,77,80,81,200,198,198,54,51,198,51,81,58,55,199,58,199,202,62,59,203,62,203,204,66,63,205,66,205,206,70,67,207,70,207,208,193,71,209,193,209,210,74,197,211,214,78,75,75,212,213,75,213,214,82,79,215,82,215,216,83,217,201,220,85,219,222,218,84,84,89,224,84,224,222,223,88,93,223,93,226,225,92,227,229,97,87,229,87,221,91,86,96,91,96,101,95,90,100,95,100,105,228,94,104,104,109,232,104,232,228,231,108,113,231,113,234,233,112,117,233,117,236,235,116,121,235,121,238,237,120,125,237,125,240,239,124,242,239,242,241,119,114,144,119,144,149,123,118,148,123,148,153,127,122,152,127,152,157,243,126,156,243,156,244,246,129,99,246,99,230,103,98,128,103,128,133,107,102,132,107,132,137,111,106,136,111,136,141,115,110,140,115,140,145,188,1,131,188,131,247,245,158,180,245,180,184,135,130,0,135,0,161,139,134,160,139,160,5,143,138,4,143,4,165,147,142,164,147,164,169,151,146,168,151,168,173,155,150,172,155,172,177,159,154,176,159,176,181]
						
						this . buffer_geometry  = new THREE . BufferGeometry ()
						this . buffer_geometry . setAttribute ( 'position' , new THREE . BufferAttribute ( this . positions , 3 ) )
						this . buffer_geometry . setAttribute ( 'normal'   , new THREE . BufferAttribute ( this . normals   , 3 ) )
						this . buffer_geometry . setAttribute ( 'uv'       , new THREE . BufferAttribute ( this . uvs       , 2 ) )
						this . buffer_geometry . setIndex     ( this . indexes )
						
						this . plane = new THREE . Mesh ( this . buffer_geometry , new THREE . MeshBasicMaterial ( { transparent : true } ) )
						this . add ( this . plane )
						
						this . plane . position . set ( 0 , .01 , -.01 )
												
						//this . set_lat_lon ( args )
						
						this . particles = []
						
							this . sceneLight = new THREE . DirectionalLight ( 0xffffff ,0.5 )
							this . sceneLight . position  . set              ( 0 , 0 , 1 )
						this . scene      . add                          ( this . sceneLight )
						
						this . light      = new THREE  . PointLight      ( 0x062d89 , 30 , 600 , 1.7 )
							this . light      . position   . set             ( 0 , 0 , 250 )
						this . scene      . add                          ( this . light )
						
						let loader = new THREE . TextureLoader ()
						loader . load ( './assets/smoke.png' , texture => {
						  const portalGeo      = new THREE . PlaneGeometry ( 350 , 350 )
						  const portalMaterial = new THREE . MeshStandardMaterial   ( {
							map         : texture ,
							transparent : true
						  } )
						  const smokeGeo       = new THREE . PlaneGeometry  ( 800 , 800 ) //orig: 900, 900
						  const smokeMaterial  = new THREE . MeshStandardMaterial ( {
							map         : texture ,
							transparent : true 
						  } )
						  
						  for ( let p = 880 ; p > 250 ; p-- ) { //orig: 880 and 250
							const particle = new THREE . Mesh ( portalGeo , portalMaterial )
							particle . position . set (
											0.5 * p * Math.cos((4 * p * Math.PI) / 180),
											0.5 * p * Math.sin((4 * p * Math.PI) / 180),
											0.1 * p
										);
							particle . rotation . z = Math . random () * 360
							 particle         . material .opacity = 1.0 //orig: 1
							this . particles . push ( particle )
							this . scene . add ( particle )
						  }
						  
						  for ( let p = 0 ; p < 40 ; p++ ) { //orig: 40
							let particle = new THREE . Mesh ( smokeGeo , smokeMaterial )
										particle.position.set(
											Math.random() * 1000-500,
											Math.random() * 400-200,
											25
										);
							particle         . rotation .z = Math.random() *360
							particle         . material .opacity = 0.6 //orig: 0.6
							this . particles . push     ( particle )
							this . scene     . add      ( particle )
								}
						} )
					  }
					  animate     ( args ) {
						let delta = this . clock . getDelta () ;
						this . particles.forEach(p => {
						  p.rotation.z -= delta *0.2; //orig: 1.5
						});
						if(Math.random() > 0.9) {
						  this . light.power =50 + Math.random()*500; //orig: 350 +....500
						}
						
						this . render ()
					  }
					  render      ( args ) {
						this . renderer . render ( this . scene , this . camera )
						const texture = new THREE . CanvasTexture ( this . canvas )
						/*
						const c = document . createElement ( 'canvas' )
						const x = c . getContext ( '2d' )
						x . fillStyle = 'red'
						x . fillRect ( 0 , 0 , c . width , c . height )
						x . strokeStyle = 'white'
						x . lineWidth = 5
						x . moveTo ( 0 , 0 )
						x . lineTo ( c . width , c . height )
						x . moveTo ( c . width , 0 )
						x . lineTo ( 0 , c . height )
						x . stroke ()
						const t = new THREE . CanvasTexture ( c )
						*/
						this . plane . material . map = texture
					  }
					  set_lat_lon ( args ) {
						this . position . copy ( Lat_lon_to_cartesian ( args ) )
						this . rotation . set  ( - args . lat * Math . PI / 180 , args . lon * Math . PI / 180 , 0 , 'YXZ' )    
					  }
					}

					portal = new Portal( {radius: 3, lat: 25, lon: -40} )
					planet_clouds_stars_and_portal_group . add ( portal )
					
					post = new Post ()

					function animate () {
						context . clearRect ( 0 , 0 , canvas . width , canvas . height )
						//if ( tunnel ) {
							//tunnel . animate ()
							//context . drawImage ( tunnel . canvas , 0 , 0 )
						//}
						
						//group.rotation.y += 0.001
						clouds.rotation.y -= 0.0001
						
						
						//controls.update()


						//group.children.forEach((mesh) => {
						//mesh.material.opacity = 0.4
						//})

						Marker . Animate_markers ()
						
						if ( Mouse_over_globe () ) {
							//orbitControls . enableRotate = true

							if (Evento_at() != null)         document.body.style.cursor = 'pointer'
							else {
								if ( -1 == Pointers.button ) document.body.style.cursor = 'grab'
							  else                           document.body.style.cursor = 'grabbing'
							}
						} else {
							//orbitControls . enableRotate = false
							document.body.style.cursor = 'default'
						}
						
						
						/*
						if (marker_modes . mode == marker_modes.normal) {
							if (Evento . Showed != null) {
								if (new Date().getTime() - Evento . Showed.curve_start > 9000)
									Evento . Showed.hide()
							} else {
								if (new Date().getTime() - Evento . Showed_last > 2000) {
									let candidates = []
									let v_camera = new THREE.Vector3()
									for ( const eve of Evento . Eventos ) {
										v_camera.subVectors(camera.position, eve.mesh.position)
										v_camera.normalize()
										let v = eve.mesh.position.clone()
										v.normalize()
										let dot = v.dot(v_camera)
										if (dot >= data_point_threshold)
											candidates.push(eve)
									}
									if (candidates.length > 0) {
										let e = candidates[Math.floor(Math.random() * candidates.length)]
										e.show()
									}					
								}
							}
						} else {
							Evento . Showed_last = new Date () . getTime ()
						}					
						*/
						
						if ( tunnel ) {
							tunnel  . render    ()
							context . drawImage ( tunnel . canvas , 0 , 0 )
						}
						
						portal . animate()					


						scene    . add             ( planet_clouds_stars_and_portal_group )
						renderer . render          ( scene , camera )
						scene    . remove          ( planet_clouds_stars_and_portal_group )
						
						scene    . add             ( Marker . Mesh_group )
						renderer . render          ( scene , camera )
						scene    . remove          ( Marker . Mesh_group )

						context  . drawImage       ( gl_canvas , 0 , 0 )
						
						renderer2 . render    ( scene2 , camera2 )
						context   . drawImage ( gl_canvas2 , 0 , 0 )
						
/*						
						const texture_canvas = document . createElement ( 'canvas' )
						const texture_context = texture_canvas . getContext ( '2d' )
						texture_context . fillStyle = 'red'
						texture_context . fillRect ( 0 , 0 , texture_canvas . width , texture_canvas . height )
						const texture = new THREE . CanvasTexture ( texture_canvas )
*/
						
						//const texture = new THREE . CanvasTexture ( gl_canvas )
						
						//post     . render          ( { texture_map : texture } )
						//context  . drawImage       ( post . gl_canvas , 0 , 0 )

						//context  . drawImage       ( gl_canvas , 0 , 0 )
						
/*
						scene    . add             ( planet_clouds_stars_and_portal_group )
						renderer . setRenderTarget ( render_target )
						renderer . render          ( scene , camera )
						renderer . setRenderTarget ( null )
						scene    . remove          ( planet_clouds_stars_and_portal_group )
						//context  . drawImage ( gl_canvas , 0 , 0 )
						post     . render                                                   ( { texture_map : render_target . texture } )
						context  . drawImage                                                ( post . gl_canvas , 0 , 0 )
						
						if ( marker_modes . mode  != marker_modes . hidden ) scene . add    ( Marker . Mesh_group )
						renderer . setRenderTarget                                          ( render_target )
						//renderer . clear                                                    ()
						renderer . render                                                   ( scene , camera )
						renderer . setRenderTarget                                          ( null )
						if ( marker_modes . mode  != marker_modes . hidden ) scene . remove ( Marker . Mesh_group )
						post     . render                                                   ( { texture_map : render_target . texture } )
						context  . drawImage                                                ( post . gl_canvas , 0 , 0 )
*/						
						Animate_eventos ()
						
						requestAnimationFrame(animate)
					}

					{ // pointers
					container_ref.current . addEventListener ( 'pointerdown' , function ( event ) {
						if (event.type === "touchstart") Pointers.position.set(event.touches[0].clientX, event.touches[0].clientY)
						else Pointers.position.set(event.x, event.y)

						Pointers.button = event.button

						Pointers.target = event.target

						Pointers.delta.set(0, 0)
					})
					container_ref.current . addEventListener ( 'pointermove' , function ( event ) {
						if (event.type === "touchstart") Pointers.position.set(event.touches[0].clientX, event.touches[0].clientY)
						else Pointers.position.set(event.x, event.y)

						//Pointers.button = event.button

						Pointers.target = event.target

						Pointers.delta.set(0, 0)
					})
					container_ref.current . addEventListener ( 'pointerup'   , function ( event ) {
						if (event.type === "touchstart") Pointers.position.set(event.touches[0].clientX, event.touches[0].clientY)
						else Pointers.position.set(event.x, event.y)

						Pointers.button = event.button

						Pointers.target = event.target

						Pointers.delta.set(0, 0)

					//if ( Pointers . target      != renderer . domElement ) return

						if (Pointers.left_button != Pointers.button) return

						if (Evento . showed != null)
							Evento . showed.hide()

						Evento . showed = Evento_at ()
						if ( Evento . showed != null )
							Evento . showed . show ()

						Pointers.button = - 1
					})
					}

					/*
					addEventListener('touchstart', (event) => {
					  event.clientX = event.touches[0].clientX
					  event.clientY = event.touches[0].clientY
						const doesIntersect = raycaster.intersectObject(sphere)
						if (doesIntersect.length > 0) mouse.down = true
						if (mouse.down) {
					  
						  const offset = canvasContainer.getBoundingClientRect().top
						  mouse.x = (event.clientX / innerWidth)
							* 2 - 1
						  mouse.y = -((event.clientY - offset)/ innerHeight)
							* 2 + 1
						  gsap.set(popUpEl, {
							x: event.clientX,
							y: event.clientY
						  })
						}
					  }, 
					  { passive: false }
					)
					addEventListener('touchend', (event) => {
					  mouse.down = false
					})
					canvasContainer.addEventListener('mousedown', ({clientX, clientY}) => {
					  mouse.down = true
					  mouse.xPrev = clientX
					  mouse.yPrev = clientY
					})
					
					addEventListener('mousemove', (event) => {
					  mouse.x = (event.clientX / innerWidth)
						* 2 - 1
					  mouse.y = -(event.clientY / innerHeight)
						* 2 + 1
				
					gsap.set(popUpEl, {
					  x: event.clientX,
					  y: event.clientY
					})
*/

					
					animate()
				}

				Init_ThreeJS ()
				
				const gltf_loader = new THREE . GLTFLoader ()
				gltf_loader . load ( './assets/frame v3.glb' , ( gltf ) => {
					const mesh = gltf . scene
					mesh . position . set ( 0 , 0 , .125	 )
					scene2 . add ( mesh )
				} )
				
				gltf_loader . setCrossOrigin ( 'anonymous' )
				const dracoLoader = new THREE . DRACOLoader () . setDecoderPath ( 'https://unpkg.com/three@0.132.2/examples/js/libs/draco/gltf/' )
				gltf_loader . setDRACOLoader ( dracoLoader )
				gltf_loader . load ( './assets/Heighliner_Compressed.glb' , ( gltf ) => {
					const model = gltf . scene
					model . position . set ( - 10 , 10 , - 10 )
					model . rotation . set ( 45 , 45 , 0 )
					scene . add ( model )
				})
				
				const loader = new THREE . TextureLoader ()
				loader . load (
					"./assets/galaxyTexture.jpg",
					texture => {
						tunnel = new Tunnel ( texture )
					}
				)											
			}
			const destroy_scene                = args => {
				//cancelAnimationFrame ( frameId )
				//container_ref . current . removeChild ( renderer . domElement )
			}
			React . useEffect ( () => {
				if ( ! renderer ) {
					create_scene ()
				}
				
				return destroy_scene
			}, [] )	
			
			return <div ref = { container_ref } />
		}

		class Ap extends React . Component {
			constructor ( props ) {
				super( props )
				
				this . pois = [
					{ description : 'me'          , lat : 10.204577 , lon : -  68.180777 } , 
					{ description : 'you'         , lat : 55.676098 , lon :    12.568337 } , 
					{ description : 'la'          , lat : 34.0522   , lon : - 118.2437   } , 					
					{ description : 'nyc'         , lat : 40.730610 , lon : -  73.935242 } , 					
					{ description : 'eiffel'      , lat : 48.857778 , lon :     2.294876 } , 
					{ description : 'giza'        , lat : 29.980387 , lon :    31.134191 } , 
					{ description : 'teotihuacan' , lat : 19.686081 , lon : -  98.871635 } , 	
				]
			}
			render      () {
				return (
					<Globe
						width  = { window . innerWidth   }
						height = { window . innerHeight  }
						pois   = { this   . pois         }
					/>
				)
			}
		}

		ReactDOM . render ( <Ap /> , document . getElementById ( 'Ap' ) )

	</script>

</body>

</html>
